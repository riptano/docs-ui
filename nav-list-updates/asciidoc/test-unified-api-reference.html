<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
<title>Documents reference | Preview Docs | PREVIEW Datastax Docs</title>
    <meta name="generator" content="Antora 1.0.0">
<link rel="stylesheet" href="../_/css/site.css">

    <link rel="icon" href="https://www.datastax.com/favicon.ico">
    <meta property="article:published_time" content="">
    <meta property="article:modified_time" content="">
    <meta property="article:author" content="DataStax">
    <meta property="og:site_name" content="DataStax Documentation">
    <meta property="og:type" content="article">
    <meta property="og:url" content="">
    <meta property="og:title" content="Documents reference | Preview Docs | PREVIEW Datastax Docs">
    <meta property="og:description" content="">
    <meta property="og:image" content="http://localhost:5252/img/datastax-docs-banner.png">
    <meta property="og:image:type" content="image/png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="628">
    <meta property="og:image:alt" content="DataStax Documentation">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@datastax">
    <meta name="twitter:creator" content="@datastax">
    <meta name="twitter:url" content="">
    <meta name="twitter:title" content="Documents reference | Preview Docs | PREVIEW Datastax Docs">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="http://localhost:5252/img/datastax-docs-banner.png">
    <script type="application/ld+json">
    [
    {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "@id": "",
        "name":"Documents reference",
        "inLanguage":"en-US",
        "reviewedBy":{
            "@type": "Corporation",
            "@id": "https://datastax.com#organization",
            "name": "DataStax"
        },
        "author":{
            "@type": "Corporation",
            "@id": "https://datastax.com#organization",
            "name": "DataStax"
        },
        "isPartOf": {
            "@type": "WebSite",
            "@id": "https://docs.datastax.com",
            "name": "DataStax Documentation"
        },
        "mainEntity":
        {
            "@type":"TechArticle",
            "@id": "#main_content",
            "mainEntityOfPage": "true",
            "datePublished":"",
            "dateModified":"",
            "headline": "Documents reference",
            "description":"",
            "keywords":"",
            "image": "http://localhost:5252/img/datastax-docs-banner.png",
            "publisher":{
                "@type": "Corporation",
                "@id": "https://datastax.com#organization",
                "name": "DataStax",
                "url": "https://datastax.com"
            },
            "author":{
                "@type": "Corporation",
                "@id": "https://datastax.com#organization",
                "name": "DataStax",
                "url": "https://datastax.com"
            }
        }
     }
    ]
    </script>


<script>var uiRootPath = '../_'</script>

<link
  rel="preload"
  href="../_/font/material-icons-outlined-latin-400-normal.woff2"
  as="font"
  type="font/woff2"
  crossorigin
/>
<link
  rel="preload"
  href="../_/font/roboto-flex-latin-wght-normal.woff2"
  as="font"
  type="font/woff2"
  crossorigin
/>
<link
  rel="preload"
  href="../_/font/roboto-mono-latin-500-normal.woff2"
  as="font"
  type="font/woff2"
  crossorigin
/>

<script>
  function getTheme() {
    var localStorage = window.localStorage.getItem("theme");
    var prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
    if (localStorage) return localStorage;
    if (prefersDark) return "dark";
    return "light";
  }
  document.documentElement.setAttribute("data-theme", getTheme());
</script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />  </head>
  <body class="">
<div class="navbar bg-body border-b z-40 fixed top-0 flex flex-col w-full h-32">
  <nav class="flex flex-auto items-center gap-2 lg:gap-4 p-4">
    <label
      for="nav-drawer-input"
      class="btn btn-neutral btn-plain btn-icon drawer-button lg:hidden"
    >
      <i class="icon material-icons">menu_open</i>
    </label>
    <a href="http://localhost:5252">
      <svg
  xmlns="http://www.w3.org/2000/svg"
  height="38"
  fill="none"
  viewBox="0 0 287 40"
  class="hidden lg:block"
>
  <path fill="var(--ds-text-primary)" d="M0 0h192.307v40H0V0Z" />
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <g clip-path="url(#c)">
        <path
          fill="var(--ds-background-body)"
          d="M112.424 15.144v-2.62H99.972l-3.38 2.62v3.597l3.38 2.62h10.852v3.693h-13.56v2.617h12.787l3.382-2.617V21.36l-3.382-2.62H99.2v-3.597h13.224Zm-65.175-2.62h-2.375L36.16 27.671h3.013l6.893-11.98 6.884 11.98h3.01l-8.71-15.147Zm25.898 0H56.305v2.62h7.118V27.67h2.606V15.144h7.118v-2.62Zm61.311 0h-16.839v2.62h7.115V27.67h2.609V15.144h7.115v-2.62Zm-104.978 0H16.02v15.147h13.46l3.381-2.62v-9.907l-3.38-2.62Zm-10.852 2.62h11.625v9.91H18.628v-9.91Zm146.633 4.954-1.507-2.62v.002l-2.85-4.956h-3.013l4.358 7.574-4.358 7.573h3.013l2.85-4.954 1.507-2.62Zm4.284 0 1.508-2.62v.002l2.853-4.956h3.009l-4.354 7.574 4.354 7.573h-3.009l-2.853-4.954-1.508-2.62Zm-87.341-7.574h2.375l8.712 15.147H90.28l-6.893-11.98-6.885 11.98h-3.01l8.713-15.147Zm61.311 0h2.375l8.712 15.147h-3.01l-6.895-11.98-6.882 11.98h-3.013l8.713-15.147Z"
        />
      </g>
    </g>
  </g>
  <path
    fill="var(--ds-background-body)"
    stroke="var(--ds-text-primary)"
    stroke-width="2"
    d="M193.307 1h91.846v38h-91.846V1Z"
    vector-effect="non-scaling-stroke"
  />
  <path
    fill="var(--ds-text-primary)"
    d="M208.673 27.748v-1.293h3.674c.911 0 1.704-.147 2.381-.443a5.028 5.028 0 0 0 1.736-1.2 5.187 5.187 0 0 0 1.052-1.772 6.346 6.346 0 0 0 .351-2.123c0-.776-.123-1.495-.369-2.16a4.983 4.983 0 0 0-1.053-1.754 4.633 4.633 0 0 0-1.735-1.163c-.677-.27-1.465-.406-2.363-.406h-3.674v-1.292h3.526c1.206 0 2.252.184 3.139.553.886.37 1.624.874 2.215 1.514a6.06 6.06 0 0 1 1.311 2.123 7.05 7.05 0 0 1 .424 2.4v.351c0 .8-.141 1.594-.424 2.382a6.59 6.59 0 0 1-1.293 2.16c-.578.64-1.317 1.157-2.215 1.55-.886.382-1.938.573-3.157.573h-3.526Zm-1.034 0V14.14h1.403v13.607h-1.403Zm23.906.24c-1.169 0-2.184-.21-3.046-.628a6.273 6.273 0 0 1-2.141-1.662 7.308 7.308 0 0 1-1.274-2.252 7.215 7.215 0 0 1-.425-2.381v-.333c0-.824.142-1.643.425-2.455a6.924 6.924 0 0 1 1.311-2.234 6.27 6.27 0 0 1 2.16-1.588c.861-.406 1.858-.609 2.99-.609 1.145 0 2.142.203 2.991.61a6.27 6.27 0 0 1 2.16 1.587 6.664 6.664 0 0 1 1.292 2.234 7.12 7.12 0 0 1 .443 2.455v.351c0 .775-.141 1.57-.424 2.382a6.913 6.913 0 0 1-1.274 2.233 6.267 6.267 0 0 1-2.142 1.662c-.861.418-1.876.628-3.046.628Zm0-1.293c.862 0 1.631-.154 2.308-.461a5.142 5.142 0 0 0 1.717-1.293 5.979 5.979 0 0 0 1.071-1.864c.246-.69.369-1.41.369-2.16 0-.788-.123-1.526-.369-2.216a5.388 5.388 0 0 0-1.09-1.827 4.933 4.933 0 0 0-1.716-1.274c-.677-.308-1.44-.462-2.29-.462-.837 0-1.594.154-2.27.462a5.123 5.123 0 0 0-1.736 1.274 5.8 5.8 0 0 0-1.089 1.828 6.542 6.542 0 0 0-.369 2.215c0 .75.123 1.47.369 2.16.246.69.603 1.31 1.071 1.864.467.542 1.04.973 1.717 1.293.689.307 1.458.461 2.307.461Zm19.167 1.293c-1.206 0-2.24-.21-3.102-.628-.849-.43-1.544-.99-2.086-1.68a7.052 7.052 0 0 1-1.163-2.234 8.136 8.136 0 0 1-.369-2.363v-.35c0-.825.123-1.644.369-2.456a6.833 6.833 0 0 1 1.182-2.234c.541-.665 1.23-1.194 2.067-1.588.837-.406 1.828-.609 2.973-.609 1.157 0 2.153.203 2.99.61.85.405 1.527.978 2.031 1.716.505.726.812 1.588.923 2.585h-1.421c-.099-.8-.357-1.465-.776-1.994a3.86 3.86 0 0 0-1.606-1.218c-.64-.271-1.354-.407-2.141-.407-.85 0-1.6.154-2.253.462a4.353 4.353 0 0 0-1.606 1.255 5.514 5.514 0 0 0-.978 1.846 7.185 7.185 0 0 0-.333 2.216c0 .75.105 1.47.314 2.16.222.69.554 1.31.997 1.864.443.542.997.973 1.662 1.293.664.307 1.44.461 2.326.461 1.231 0 2.264-.307 3.101-.923.837-.627 1.354-1.526 1.551-2.695h1.422a6.018 6.018 0 0 1-.96 2.51c-.505.74-1.188 1.324-2.05 1.755-.849.43-1.87.646-3.064.646Zm16.997 0c-1.132 0-2.086-.179-2.861-.536-.776-.369-1.366-.874-1.773-1.514-.393-.652-.59-1.384-.59-2.197h1.403c0 .517.123 1.004.369 1.459.258.443.665.806 1.218 1.09.567.27 1.311.405 2.234.405.849 0 1.551-.123 2.105-.369.566-.246.984-.578 1.255-.997a2.45 2.45 0 0 0 .425-1.403c0-.652-.259-1.194-.776-1.624-.504-.444-1.267-.708-2.289-.794l-1.551-.148c-1.156-.098-2.08-.455-2.769-1.07-.677-.628-1.015-1.453-1.015-2.475 0-.775.184-1.458.554-2.049.369-.59.892-1.058 1.569-1.403.689-.345 1.514-.517 2.474-.517.972 0 1.803.179 2.492.536.702.344 1.237.824 1.606 1.44.369.615.554 1.329.554 2.141h-1.403a2.99 2.99 0 0 0-.332-1.385c-.222-.43-.573-.775-1.053-1.033-.48-.271-1.101-.407-1.864-.407-.726 0-1.329.123-1.809.37-.468.246-.819.572-1.053.978a2.74 2.74 0 0 0-.332 1.33c0 .602.215 1.113.646 1.532.431.418 1.052.658 1.865.72l1.55.147c.911.074 1.687.277 2.327.61.652.32 1.15.744 1.495 1.273.345.517.517 1.127.517 1.828 0 .788-.215 1.49-.646 2.105-.419.615-1.016 1.095-1.791 1.44-.775.344-1.692.517-2.751.517Z"
  />
  <defs>
    <clipPath id="a">
      <path
        fill="var(--ds-background-body)"
        d="M16.02 12.524h160.895v15.147H16.02z"
      />
    </clipPath>
    <clipPath id="b">
      <path
        fill="var(--ds-background-body)"
        d="M16.02 12.524h160.934v15.147H16.02z"
      />
    </clipPath>
    <clipPath id="c">
      <path
        fill="var(--ds-background-body)"
        d="M16.02 12.524h160.895v15.147H16.02z"
      />
    </clipPath>
  </defs>
</svg>

<svg
  xmlns="http://www.w3.org/2000/svg"
  height="38"
  fill="none"
  viewBox="0 0 162 40"
  class="block lg:hidden"
>
  <path fill="var(--ds-text-primary)" d="M0 0h68v40H0V0Z" />
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <path
        fill="var(--ds-background-body)"
        d="M29.48 12.524H16.02v15.147h13.46l3.381-2.62v-9.907l-3.38-2.62Zm-10.852 2.62h11.625v9.91H18.628v-9.91Zm34.066 0v-2.62H40.243l-3.381 2.62v3.597l3.38 2.62h10.852v3.693h-13.56v2.617h12.788l3.381-2.617V21.36l-3.381-2.62H39.47v-3.597h13.224Z"
      />
    </g>
  </g>
  <path
    fill="var(--ds-background-body)"
    stroke="var(--ds-text-primary)"
    stroke-width="2"
    d="M69 1h91.846v38H69V1Z"
    vector-effect="non-scaling-stroke"
  />
  <path
    fill="var(--ds-text-primary)"
    d="M84.366 27.748v-1.293h3.674c.91 0 1.704-.147 2.381-.443a5.03 5.03 0 0 0 1.735-1.2 5.175 5.175 0 0 0 1.053-1.772c.233-.665.35-1.372.35-2.123a6.17 6.17 0 0 0-.369-2.16 4.983 4.983 0 0 0-1.052-1.754 4.637 4.637 0 0 0-1.736-1.163c-.676-.27-1.464-.406-2.362-.406h-3.674v-1.292h3.526c1.206 0 2.252.184 3.138.553.886.37 1.625.874 2.216 1.514a6.065 6.065 0 0 1 1.31 2.123 7.03 7.03 0 0 1 .425 2.4v.351c0 .8-.141 1.594-.425 2.382a6.6 6.6 0 0 1-1.292 2.16c-.578.64-1.317 1.157-2.215 1.55-.887.382-1.939.573-3.157.573h-3.526Zm-1.034 0V14.14h1.403v13.607h-1.403Zm23.906.24c-1.169 0-2.185-.21-3.046-.628a6.267 6.267 0 0 1-2.142-1.662 7.35 7.35 0 0 1-1.274-2.252 7.213 7.213 0 0 1-.424-2.381v-.333c0-.824.141-1.643.424-2.455a6.96 6.96 0 0 1 1.311-2.234 6.288 6.288 0 0 1 2.16-1.588c.862-.406 1.859-.609 2.991-.609 1.145 0 2.142.203 2.991.61a6.288 6.288 0 0 1 2.16 1.587 6.681 6.681 0 0 1 1.292 2.234c.295.812.443 1.63.443 2.455v.351c0 .775-.141 1.57-.424 2.382a6.913 6.913 0 0 1-1.274 2.233 6.267 6.267 0 0 1-2.142 1.662c-.861.418-1.877.628-3.046.628Zm0-1.293c.862 0 1.631-.154 2.308-.461a5.142 5.142 0 0 0 1.717-1.293 5.996 5.996 0 0 0 1.07-1.864c.247-.69.37-1.41.37-2.16 0-.788-.123-1.526-.37-2.216a5.386 5.386 0 0 0-1.089-1.827 4.937 4.937 0 0 0-1.717-1.274c-.677-.308-1.44-.462-2.289-.462-.837 0-1.594.154-2.271.462a5.12 5.12 0 0 0-1.735 1.274 5.8 5.8 0 0 0-1.089 1.828 6.518 6.518 0 0 0-.37 2.215c0 .75.123 1.47.37 2.16.246.69.603 1.31 1.07 1.864.468.542 1.04.973 1.717 1.293.69.307 1.459.461 2.308.461Zm19.166 1.293c-1.206 0-2.24-.21-3.101-.628-.849-.43-1.545-.99-2.086-1.68a7.052 7.052 0 0 1-1.163-2.234 8.139 8.139 0 0 1-.37-2.363v-.35c0-.825.124-1.644.37-2.456a6.83 6.83 0 0 1 1.181-2.234c.542-.665 1.231-1.194 2.068-1.588.837-.406 1.828-.609 2.972-.609 1.157 0 2.154.203 2.991.61a5.042 5.042 0 0 1 2.031 1.716c.504.726.812 1.588.923 2.585h-1.422c-.098-.8-.357-1.465-.775-1.994a3.866 3.866 0 0 0-1.606-1.218c-.64-.271-1.354-.407-2.142-.407-.849 0-1.6.154-2.252.462a4.353 4.353 0 0 0-1.606 1.255 5.534 5.534 0 0 0-.979 1.846 7.215 7.215 0 0 0-.332 2.216c0 .75.105 1.47.314 2.16.221.69.554 1.31.997 1.864.443.542.997.973 1.661 1.293.665.307 1.44.461 2.326.461 1.231 0 2.265-.307 3.102-.923.837-.627 1.354-1.526 1.551-2.695h1.421a5.991 5.991 0 0 1-.96 2.51c-.504.74-1.187 1.324-2.049 1.755-.849.43-1.871.646-3.065.646Zm16.998 0c-1.132 0-2.086-.179-2.862-.536-.775-.369-1.366-.874-1.772-1.514-.394-.652-.591-1.384-.591-2.197h1.403c0 .517.123 1.004.37 1.459.258.443.664.806 1.218 1.09.566.27 1.311.405 2.234.405.849 0 1.551-.123 2.104-.369.567-.246.985-.578 1.256-.997.283-.418.424-.886.424-1.403 0-.652-.258-1.194-.775-1.624-.505-.444-1.268-.708-2.289-.794l-1.551-.148c-1.157-.098-2.08-.455-2.769-1.07-.677-.628-1.015-1.453-1.015-2.475 0-.775.184-1.458.553-2.049.37-.59.893-1.058 1.57-1.403.689-.345 1.513-.517 2.473-.517.973 0 1.803.179 2.493.536.701.344 1.237.824 1.606 1.44.369.615.554 1.329.554 2.141h-1.403a2.98 2.98 0 0 0-.333-1.385c-.221-.43-.572-.775-1.052-1.033-.48-.271-1.102-.407-1.865-.407-.726 0-1.329.123-1.809.37-.467.246-.818.572-1.052.978-.222.406-.332.85-.332 1.33 0 .602.215 1.113.646 1.532.431.418 1.052.658 1.864.72l1.551.147c.911.074 1.686.277 2.326.61.653.32 1.151.744 1.496 1.273.344.517.517 1.127.517 1.828a3.58 3.58 0 0 1-.647 2.105c-.418.615-1.015 1.095-1.79 1.44-.776.344-1.693.517-2.751.517Z"
  />
  <defs>
    <clipPath id="a">
      <path fill="var(--ds-background-body)" d="M16 12h38v16H16z" />
    </clipPath>
    <clipPath id="b">
      <path
        fill="var(--ds-background-body)"
        d="M16.02 12.524h37.683v15.147H16.02z"
      />
    </clipPath>
  </defs>
</svg>    </a>
    <div class="DocSearch" id="docsearch"></div>
    <button
      class="w-10 ml-auto btn btn-neutral btn-outlined lg:w-auto"
      id="get-support"
    ><span class="material-icons lg:mr-2">support_agent</span><span
        class="hidden lg:inline-block"
      >Get Live Help</span>
    </button>
    <button class="btn btn-icon btn-neutral btn-outlined" id="theme-toggle">
      <i
        class="material-icons icon hidden text-[var(--ds-warning-300)] dark:block"
      >light_mode</i>
      <i
        class="material-icons icon block text-[var(--ds-primary-400)] dark:hidden"
      >dark_mode</i>
    </button>
  </nav>
 <nav class="global-nav motion-safe:scroll-smooth items-center flex gap-3 py-2 px-4 overflow-x-auto overflow-y-hidden no-scrollbar">
  <a 
    class="btn btn-plain btn-neutral flex gap-1" 
    href="#"
    >
      <i class="material-icons text-xl">home</i>
      Docs Home
  </a>
  <div class="m-0.5 border-l h-6 w-[1px]"></div>
  <div class="dropdown" data-trigger-type="hover">
    <button id="nav-dropdown-1" class="group dropdown-trigger btn btn-plain btn-neutral flex gap-1" aria-haspopup="true" aria-expanded="false">
      Astra DB
      <i class="material-icons text-lg text-tertiary motion-safe:transition-transform motion-safe:duration-300 motion-safe:ease-in-out group-[.active]:rotate-180">expand_more</i>
    </button>
    <ul class="dropdown-content py-2 bg-body border rounded w-52 z-[1]" role="menu" aria-orientation="vertical" aria-labelledby="nav-dropdown-1">
      <li>
        <a 
          class="!no-underline w-full py-1 px-3 transition-colors flex gap-1 items-center hover:bg-level1"
          href="#"
          >
            Serverless
            
        </a>
      </li> 
      <li>
        <a 
          class="!no-underline w-full py-1 px-3 transition-colors flex gap-1 items-center hover:bg-level1"
          href="#"
          >
            Dedicated
            
        </a>
      </li> 
      <li>
        <a 
          class="!no-underline w-full py-1 px-3 transition-colors flex gap-1 items-center hover:bg-level1"
          href="#"
          >
            CLI
            
        </a>
      </li> 
    </ul>
  </div>
  <a 
    class="btn btn-plain btn-neutral flex gap-1" 
    href="#"
    >
      
      RAGStack
  </a>
  
  <div class="dropdown" data-trigger-type="hover">
    <button id="nav-dropdown-3" class="group dropdown-trigger btn btn-plain btn-neutral flex gap-1" aria-haspopup="true" aria-expanded="false">
      DSE
      <i class="material-icons text-lg text-tertiary motion-safe:transition-transform motion-safe:duration-300 motion-safe:ease-in-out group-[.active]:rotate-180">expand_more</i>
    </button>
    <ul class="dropdown-content py-2 bg-body border rounded w-52 z-[1]" role="menu" aria-orientation="vertical" aria-labelledby="nav-dropdown-3">
      <li>
        <a 
          class="!no-underline w-full py-1 px-3 transition-colors flex gap-1 items-center hover:bg-level1"
          href="#"
          >
            Mission Control
            
        </a>
      </li> 
      <li>
        <a 
          class="!no-underline w-full py-1 px-3 transition-colors flex gap-1 items-center hover:bg-level1"
          href="#"
          >
            DSE 6.8
            
        </a>
      </li> 
      <li>
        <a 
          class="!no-underline w-full py-1 px-3 transition-colors flex gap-1 items-center hover:bg-level1"
          href="#"
          >
            DSE 5.1
            
        </a>
      </li> 
      <li>
        <a 
          class="!no-underline w-full py-1 px-3 transition-colors flex gap-1 items-center hover:bg-level1"
          href="#"
          >
            CLI
            
        </a>
      </li> 
    </ul>
  </div>
  <div class="dropdown" data-trigger-type="hover">
    <button id="nav-dropdown-4" class="group dropdown-trigger btn btn-plain btn-neutral flex gap-1" aria-haspopup="true" aria-expanded="false">
      Streaming
      <i class="material-icons text-lg text-tertiary motion-safe:transition-transform motion-safe:duration-300 motion-safe:ease-in-out group-[.active]:rotate-180">expand_more</i>
    </button>
    <ul class="dropdown-content py-2 bg-body border rounded w-52 z-[1]" role="menu" aria-orientation="vertical" aria-labelledby="nav-dropdown-4">
      <li>
        <a 
          class="!no-underline w-full py-1 px-3 transition-colors flex gap-1 items-center hover:bg-level1"
          href="#"
          >
            Astra Streaming
            
        </a>
      </li> 
      <li>
        <a 
          class="!no-underline w-full py-1 px-3 transition-colors flex gap-1 items-center hover:bg-level1"
          href="#"
          >
            Luna Streaming
            
        </a>
      </li> 
    </ul>
  </div>
  <div class="dropdown" data-trigger-type="hover">
    <button id="nav-dropdown-5" class="group dropdown-trigger btn btn-plain btn-neutral flex gap-1" aria-haspopup="true" aria-expanded="false">
      Open Source
      <i class="material-icons text-lg text-tertiary motion-safe:transition-transform motion-safe:duration-300 motion-safe:ease-in-out group-[.active]:rotate-180">expand_more</i>
    </button>
    <ul class="dropdown-content py-2 bg-body border rounded w-52 z-[1]" role="menu" aria-orientation="vertical" aria-labelledby="nav-dropdown-5">
      <li>
        <a 
          class="!no-underline w-full py-1 px-3 transition-colors flex gap-1 items-center hover:bg-level1"
          href="#"
          >
            Apache Pulsar Connector
            
        </a>
      </li> 
      <li>
        <a 
          class="!no-underline w-full py-1 px-3 transition-colors flex gap-1 items-center hover:bg-level1"
          href="#"
          >
            CDC for Cassandra
            
        </a>
      </li> 
      <li>
        <a 
          class="!no-underline w-full py-1 px-3 transition-colors flex gap-1 items-center hover:bg-level1"
          href="https://docs.k8ssandra.io"
          target="_blank">
            K8ssandra
            <i class="material-icons text-sm text-tertiary">open_in_new</i>
        </a>
      </li> 
      <li>
        <a 
          class="!no-underline w-full py-1 px-3 transition-colors flex gap-1 items-center hover:bg-level1"
          href="#"
          >
            Stargate
            
        </a>
      </li> 
      <li>
        <a 
          class="!no-underline w-full py-1 px-3 transition-colors flex gap-1 items-center hover:bg-level1"
          href="#"
          >
            Starlight for JMS
            
        </a>
      </li> 
      <li>
        <a 
          class="!no-underline w-full py-1 px-3 transition-colors flex gap-1 items-center hover:bg-level1"
          href="#"
          >
            Starlight for Kafka
            
        </a>
      </li> 
      <li>
        <a 
          class="!no-underline w-full py-1 px-3 transition-colors flex gap-1 items-center hover:bg-level1"
          href="#"
          >
            Starlight for Rabbit MQ
            
        </a>
      </li> 
    </ul>
  </div>
</nav>
</div><div class="drawer lg:drawer-open">
  <input id="nav-drawer-input" type="checkbox" class="drawer-toggle" />
  <div class="grid drawer-content pt-32">
    <div class="grid max-w-full h-full xl:gap-x-10 gap-y-3 px-3 py-4 mx-auto lg:px-6">
  <main class="w-[min(48rem,100%)] max-w-[48rem] mx-auto min-w-0 mb-8">
    <nav class="flex" aria-label="breadcrumbs">
</nav>
    <article class="doc">
  <h1 class="page">Documents reference</h1>
  <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>üìù <strong><em>NOTE: This content was pulled from <a href="https://github.com/riptano/astra-vector-docs/pull/308">PR 308</a></em></strong></p>
</div>
<div class="paragraph">
<p>Documents represent a single row or record of data in Astra DB Serverless.</p>
</div>
<div class="paragraph">
<p>Use the <code>Collection</code> class to work with documents.</p>
</div>
<div class="paragraph">
<p>If you haven&#8217;t already, consult the <a href="api-reference:collections.html">Collections reference</a> topic for details on how to get a <code>Collection</code> object.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_working_with_dates"><a class="anchor" href="#_working_with_dates"></a>Working with dates</h2>
<div class="sectionbody">
<div id="_tabs_1" class="openblock tabs is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_1_python" class="tab">
<p>Python</p>
</li>
<li id="_tabs_1_typescript" class="tab">
<p>TypeScript</p>
</li>
<li id="_tabs_1_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_1_curl" class="tab">
<p>cURL</p>
</li>
</ul>
</div>
<div id="_tabs_1_python--panel" class="tabpanel" aria-labelledby="_tabs_1_python">
<div class="paragraph">
<p>Date and datetime objects, which are instances of the Python standard library
<code>datetime.datetime</code> and <code>datetime.date</code> classes, can be used anywhere in documents.</p>
</div>
<div class="paragraph">
<p>Read operations from a collection always return the <code>datetime</code> class regardless of whether a <code>date</code> or a <code>datetime</code> was provided in the insertion.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">import datetime

from astrapy import DataAPIClient
from astrapy.ids import ObjectId, uuid8, UUID
client = DataAPIClient("<strong>TOKEN</strong>")
database = my_client.get_database_by_api_endpoint("01234567-...")
collection = database.my_collection

collection.insert_one({"when": datetime.datetime.now()})
collection.insert_one({"date_of_birth": datetime.date(2000, 1, 1)})

collection.update_one(
    {"registered_at": datetime.date(1999, 11, 14)},
    {"$set": {"message": "happy Sunday!"}},
)

print(
    collection.find_one(
        {"date_of_birth": {"$lt": datetime.date(2001, 1, 1)}},
        projection={"_id": False},
    )
)
# will print:
#    {'date_of_birth': datetime.datetime(2000, 1, 1, 0, 0)}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>As shown in the example, read operations from a collection always return the <code>datetime</code> class regardless of whether a <code>date</code> or a <code>datetime</code> was provided
in the insertion.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div id="_tabs_1_typescript--panel" class="tabpanel" aria-labelledby="_tabs_1_typescript">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">Hello TypeScript world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_java--panel" class="tabpanel" aria-labelledby="_tabs_1_java">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello Java world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_curl--panel" class="tabpanel" aria-labelledby="_tabs_1_curl">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello cURL world. TBD.</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_working_with_document_ids"><a class="anchor" href="#_working_with_document_ids"></a>Working with document IDs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Documents in a collection are always identified by an ID that is unique within the collection.
The ID can be any of several types, such as a string, integer, or datetime. However, it&#8217;s recommended to instead prefer the <code>uuid</code> or the <code>ObjectId</code> types.</p>
</div>
<div class="paragraph">
<p>The Data API supports <code>uuid</code> identifiers up to version 8, as well as <code>ObjectId</code> identifiers as provided by the <code>bson</code> library.
These can appear anywhere in the document, not only in its <code>_id</code> field. Moreover, different types of identifier can appear in different parts of the same document. And these identifiers can be part of filtering clauses and update/replace directives just like any other data type.</p>
</div>
<div class="paragraph">
<p>One of the optional settings of a collection is the "default ID type": that is, it is possible to specify what kind of identifiers the server should supply
for documents without an explicit <code>_id</code> field. (For details, see the <code>create_collection</code> method and Data API <code>createCollection</code> command in the <a href="api-reference:collections.html#create-a-collection">Collections reference</a>.) Regardless of the <code>defaultId</code> setting, however, identifiers of any type can be explicitly provided for documents. For example, during insertions, and will be honored by the insertion process.</p>
</div>
<div id="_tabs_2" class="openblock tabs is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_2_python" class="tab">
<p>Python</p>
</li>
<li id="_tabs_2_typescript" class="tab">
<p>TypeScript</p>
</li>
<li id="_tabs_2_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_2_curl" class="tab">
<p>cURL</p>
</li>
</ul>
</div>
<div id="_tabs_2_python--panel" class="tabpanel" aria-labelledby="_tabs_2_python">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">from astrapy.ids import (
    ObjectId,
    uuid1,
    uuid3,
    uuid4,
    uuid5,
    uuid6,
    uuid7,
    uuid8,
    UUID,
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>AstraPy recognizes <code>uuid</code> versions 1 through 8 (with the exception of 2) as provided by the <code>uuid</code> and <code>uuid6</code> Python libraries, as well as the <code>ObjectId</code>
from the <code>bson</code> package. Furthermore, out of convenience, these same utilities are exposed as shown in the example above.</p>
</div>
<div class="paragraph">
<p>You can then generate new identifiers with statements such as <code>new_id = uuid8()</code> or <code>new_obj_id = ObjectId()</code>.
Keep in mind that all <code>uuid</code> versions are instances of the same class (<code>UUID</code>), which exposes a <code>version</code> property, should you need to access it.</p>
</div>
<div class="paragraph">
<p>Here is a short example of the concepts:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">from astrapy import DataAPIClient
from astrapy.ids import ObjectId, uuid8, UUID
client = DataAPIClient("<strong>TOKEN</strong>")
database = my_client.get_database_by_api_endpoint("01234567-...")
collection = database.my_collection

collection.insert_one({"_id": uuid8(), "tag": "new_id_v_8"})
collection.insert_one(
    {"_id": UUID("018e77bc-648d-8795-a0e2-1cad0fdd53f5"), "tag": "id_v_8"}
)
collection.insert_one({"id": ObjectId(), "tag": "new_obj_id"})
collection.insert_one(
    {"id": ObjectId("6601fb0f83ffc5f51ba22b88"), "tag": "obj_id"}
)
collection.find_one_and_update(
    {"_id": ObjectId("6601fb0f83ffc5f51ba22b88")},
    {"$set": {"item_inventory_id": UUID("1eeeaf80-e333-6613-b42f-f739b95106e6")}},
)</code></pre>
</div>
</div>
</div>
<div id="_tabs_2_typescript--panel" class="tabpanel" aria-labelledby="_tabs_2_typescript">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">Hello TypeScript world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_2_java--panel" class="tabpanel" aria-labelledby="_tabs_2_java">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello Java world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_2_curl--panel" class="tabpanel" aria-labelledby="_tabs_2_curl">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello cURL world. TBD.</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_insert_a_single_document"><a class="anchor" href="#_insert_a_single_document"></a>Insert a single document</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Insert a single document into a collection.</p>
</div>
<div id="_tabs_3" class="openblock tabs is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_3_python" class="tab">
<p>Python</p>
</li>
<li id="_tabs_3_typescript" class="tab">
<p>TypeScript</p>
</li>
<li id="_tabs_3_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_3_curl" class="tab">
<p>cURL</p>
</li>
</ul>
</div>
<div id="_tabs_3_python--panel" class="tabpanel" aria-labelledby="_tabs_3_python">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">insert_result = collection.insert_one({"name": "Jane Doe"})</code></pre>
</div>
</div>
<div class="paragraph">
<p>Insert a document with an associated vector.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">insert_result = collection.insert_one(
    {"name": "Jane Doe"},
    vector=[.08, .68, .30],
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">document</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dict</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The dictionary expressing the document to insert. The <code>_id</code> field of the document can be left out, in which case it will be created automatically.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dict[str, Any]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A vector (a list of numbers appropriate for the collection) for the document. Passing this parameter is equivalent to providing the vector in the "$vector" field of the document itself, however the two are mutually exclusive.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max_time_ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dict[str, Any]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A timeout, in milliseconds, for the underlying HTTP request.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">from astrapy import DataAPIClient
client = DataAPIClient("<strong>TOKEN</strong>")
database = my_client.get_database_by_api_endpoint("01234567-...")
collection = database.my_collection

# Insert a document with a specific ID
response1 = collection.insert_one(
    {
        "_id": 101,
        "name": "John Doe",
    },
    vector=[.12, .52, .32],
)

# Insert a document without specifying an ID
# so that <code>_id</code> is generated automatically
response2 = collection.insert_one(
    {
        "name": "Jane Doe",
    },
    vector=[.08, .68, .30],
)</code></pre>
</div>
</div>
</div>
<div id="_tabs_3_typescript--panel" class="tabpanel" aria-labelledby="_tabs_3_typescript">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">Collection&lt;Schema&gt;.insertOne(
  document: MaybeId&lt;Schema&gt;,
  options?: InsertOneOptions,
): Promise&lt;InsertOneResult&lt;Schema&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">document</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="http://127.0.0.1:8080/types/MaybeId.html">MaybeId&lt;Schema&gt;</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The document to insert. If the document does not have an <code>_id</code> field, the server generates one.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">options?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="http://127.0.0.1:8080/interfaces/InsertOneOptions.html">InsertOneOptions</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The options for this operation.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Options (<code><a href="http://127.0.0.1:8080/interfaces/InsertOneOptions.html">InsertOneOptions</a></code>):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://127.0.0.1:8080/interfaces/InsertOneOptions.html#vector">vector?</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>number[]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The vector for the document. Equivalent to providing the vector in the <code>$vector</code> field of the document itself; however, the two are mutually exclusive.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://127.0.0.1:8080/interfaces/InsertOneOptions.html#maxTimeMS">maxTimeMS?</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum time in milliseconds that the client should wait for the operation to complete.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Returns:</p>
</div>
<div class="paragraph">
<p><code>Promise&lt;<a href="http://127.0.0.1:8080/interfaces/InsertOneResult.html">InsertOneResult&lt;Schema&gt;</a>&gt;</code> - A promise that resolves to the inserted ID.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { DataApiClient } from '@datastax/astra-db-ts';

// Reference an untyped collection
const db = new DataApiClient('<strong>TOKEN</strong>').db('<strong>API_ENDPOINT</strong>');
const collection = db.collection('my_collection');

(async () =&gt; {
  // Insert a document with a specific ID
  await collection.insertOne({ _id: '1', name: 'John Doe' });

  // Insert a document with an autogenerated ID
  await collection.insertOne({ name: 'Jane Doe' });

  // Insert a document with a vector
  await collection.insertOne({ name: 'Jane Doe' }, { vector: [.12, .52, .32] });
  await collection.insertOne({ name: 'Jane Doe', $vector: [.12, .52, .32] });
})();</code></pre>
</div>
</div>
</div>
<div id="_tabs_3_java--panel" class="tabpanel" aria-labelledby="_tabs_3_java">
<div class="paragraph">
<p>TBD</p>
</div>
</div>
<div id="_tabs_3_curl--panel" class="tabpanel" aria-labelledby="_tabs_3_curl">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">cURL -s --location \
--request POST ${ASTRA_DB_API_ENDPOINT}/api/json/v1/${ASTRA_DB_KEYSPACE}/${ASTRA_DB_COLLECTION} \
--header "Token: ${ASTRA_DB_APPLICATION_TOKEN}" \
--header "Content-Type: application/json" \
--header "Accept: application/json" \
--data '{
  "insertOne": {
    "document": {
      "_id": "1",
      "purchase_type": "Online",
      "$vector": [0.25, 0.25, 0.25, 0.25, 0.25],
      "customer": {
        "name": "Jim A.",
        "phone": "123-456-1111",
        "age": 51,
        "credit_score": 782,
        "address": {
          "address_line": "1234 Broadway",
          "city": "New York",
          "state": "NY"
        }
      },
      "purchase_date": {"$date": 1690045891},
      "seller": {
        "name": "Jon B.",
        "location": "Manhattan NYC"
      },
      "items": [
        {
          "car" : "BMW 330i Sedan",
          "color": "Silver"
        },
        "Extended warranty - 5 years"
      ],
      "amount": 47601,
      "status" : "active",
      "preferred_customer" : true
    }
  }
}' | json_pp</code></pre>
</div>
</div>
<div class="paragraph">
<p>Properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">insertOne</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data API designation that a single document is inserted.</p>
<p class="tableblock"><a href="api-reference:partial$insert-command-payload.adoc" class="bare">api-reference:partial$insert-command-payload.adoc</a></p></td>
</tr>
</tbody>
</table>
<details>
<summary class="title">Response</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "status": {
        "insertedIds": [
            "1"
        ]
    }
}</code></pre>
</div>
</div>
</div>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_insert_many_documents"><a class="anchor" href="#_insert_many_documents"></a>Insert many documents</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Insert multiple documents into a collection.</p>
</div>
<div id="_tabs_4" class="openblock tabs is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_4_python" class="tab">
<p>Python</p>
</li>
<li id="_tabs_4_typescript" class="tab">
<p>TypeScript</p>
</li>
<li id="_tabs_4_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_4_curl" class="tab">
<p>cURL</p>
</li>
</ul>
</div>
<div id="_tabs_4_python--panel" class="tabpanel" aria-labelledby="_tabs_4_python">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">response = collection.insert_many(
    [
        {
            "_id": 101,
            "name": "John Doe",
        },
        {
            # ID is generated automatically
            "name": "Jane Doe",
        },
    ],
    vectors=[
        [.12, .52, .32],
        [.08, .68, .30],
    ],
    ordered=True,
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns:</p>
</div>
<div class="paragraph">
<p><code>InsertManyResult</code> - An object representing the response from the database after the insert operation. It includes information about the success of the operation and details of the inserted documents.</p>
</div>
<details>
<summary class="title">Example response</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>InsertManyResult(raw_results=[{'status': {'insertedIds': [101, '81077d86-05dc-43ca-877d-8605dce3ca4d']}}], inserted_ids=[101, '81077d86-05dc-43ca-877d-8605dce3ca4d'])</pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>Parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">documents</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Iterable[Dict[str, Any]],</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An iterable of dictionaries, each a document to insert. Documents may specify their <code>_id</code> field or leave it out, in which case it will be added automatically.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vectors</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Iterable[Optional[Iterable[float]]]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An optional list of vectors (as many vectors as the provided documents) to associate to the documents when inserting. Each vector is added to the corresponding document prior to insertion on database. The list can be a mixture of None and vectors, in which case some documents will not have a vector, unless it is specified in their "$vector" field already. Passing vectors this way is indeed equivalent to the "$vector" field of the documents, however the two are mutually exclusive.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ordered</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If True (default), the insertions are processed sequentially. If False, they can occur in arbitrary order and possibly concurrently.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">chunk_size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[int]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How many documents to include in a single API request. Exceeding the server maximum allowed value results in an error. Leave it unspecified (recommended) to use the system default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">concurrency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[int]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of concurrent requests to the API at a given time. It cannot be more than one for ordered insertions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max_time_ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[int]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A timeout, in milliseconds, for the operation.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Unless there are specific reasons not to, it is recommended to prefer <code>ordered = False</code> as it will result
in a much higher insert throughput than an equivalent ordered insertion.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">from astrapy import DataAPIClient
client = DataAPIClient("<strong>TOKEN</strong>")
database = my_client.get_database_by_api_endpoint("01234567-...")
collection = database.my_collection

collection.insert_many([{"a": 10}, {"a": 5}, {"b": [True, False, False]}])

collection.insert_many(
    [{"seq": i} for i in range(50)],
    ordered=False,
    concurrency=5,
)

# The following are three equivalent statements:
collection.insert_many(
    [{"tag": "a"}, {"tag": "b"}],
    vectors=[[1, 2], [3, 4]],
)

collection.insert_many(
    [{"tag": "a", "$vector": [1, 2]}, {"tag": "b"}],
    vectors=[None, [3, 4]],
)

collection.insert_many(
    [
        {"tag": "a", "$vector": [1, 2]},
        {"tag": "b", "$vector": [3, 4]},
    ]
)</code></pre>
</div>
</div>
</div>
<div id="_tabs_4_typescript--panel" class="tabpanel" aria-labelledby="_tabs_4_typescript">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">Collection&lt;Schema&gt;.insertMany(
  documents: MaybeId&lt;Schema&gt;[],
  options?: InsertManyOptions,
): Promise&lt;InsertManyResult&lt;Schema&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">documents</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="http://127.0.0.1:8080/types/MaybeId.html">MaybeId&lt;Schema&gt;[]</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The documents to insert. If any document does not have an <code>_id</code> field, the server generates one.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">options?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="http://127.0.0.1:8080/types/InsertManyOptions.html">InsertManyOptions</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The options for this operation.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Options (<code><a href="http://127.0.0.1:8080/types/InsertManyOptions.html">InsertManyOptions</a></code>):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://127.0.0.1:8080/interfaces/InsertManyUnorderedOptions.html#ordered">ordered?</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">You may set the <code>ordered</code> option to <code>true</code> to stop the operation after the first error; otherwise all documents
may be parallelized and processed in arbitrary order, improving, perhaps vastly, performance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://127.0.0.1:8080/interfaces/InsertManyUnorderedOptions.html#concurrency">concurrency?</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">You can set the <code>concurrency</code> option to control how many network requests are made in parallel on unordered
insertions. Defaults to <code>8</code>. Not available for ordered insertions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://127.0.0.1:8080/interfaces/InsertManyUnorderedOptions.html#chunkSize">chunkSize?</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Control how many documents are sent each network request. Defaults to <code>20</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://127.0.0.1:8080/interfaces/InsertManyUnorderedOptions.html#vectors">vectors?</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(number[] | null | undefined)[]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An array of vectors to associate with each document. If a vector is <code>null</code> or <code>undefined</code>, the document will not have a vector. Must equal the number of documents if provided. Equivalent to providing the vector in the <code>$vector</code> field of the documents themselves; however, the two are mutually exclusive.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Unless there are specific reasons not to, it is recommended to prefer to leave ordered <code>false</code> as it will result in a much higher insert throughput than an equivalent ordered insertion.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Returns:</p>
</div>
<div class="paragraph">
<p><code>Promise&lt;<a href="http://127.0.0.1:8080/interfaces/InsertManyResult.html">InsertManyResult&lt;Schema&gt;</a>&gt;</code> - A promise that resolves to the inserted IDs.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { DataApiClient, InsertManyError } from '@datastax/astra-db-ts';

// Reference an untyped collection
const db = new DataApiClient('<strong>TOKEN</strong>').db('<strong>API_ENDPOINT</strong>');
const collection = db.collection('my_collection');

(async () =&gt; {
  try {
    // Insert many documents
    await collection.insertMany([
      { _id: '1', name: 'John Doe' },
      { name: 'Jane Doe' }, // Will autogen ID
    ], { ordered: true });

    // Insert many with vectors
    await collection.insertMany([
      { name: 'John Doe', $vector: [.12, .52, .32] },
      { name: 'Jane Doe' },
      { name: 'Jane Doe', $vector: [.32, .52, .12] },
    ]);

    await collection.insertMany([
      { name: 'John Doe' },
      { name: 'Jane Doe' },
      { name: 'Dane Joe' },
    ], {
      vectors: [
        [.12, .52, .32],
        null,
        [.32, .52, .12],
      ],
      ordered: true,
    });
  } catch (e) {
    if (e instanceof InsertManyError) {
      console.log(e.insertedIds);
    }
  }
})();</code></pre>
</div>
</div>
</div>
<div id="_tabs_4_java--panel" class="tabpanel" aria-labelledby="_tabs_4_java">
<div class="paragraph">
<p>TBD</p>
</div>
</div>
<div id="_tabs_4_curl--panel" class="tabpanel" aria-labelledby="_tabs_4_curl">
<div class="paragraph">
<p>The following Data API <code>insertMany</code> command adds 20 documents to a collection.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">cURL -s --location \
--request POST ${ASTRA_DB_API_ENDPOINT}/api/json/v1/${ASTRA_DB_KEYSPACE}/${ASTRA_DB_COLLECTION} \
--header "Token: ${ASTRA_DB_APPLICATION_TOKEN}" \
--header "Content-Type: application/json" \
--header "Accept: application/json" \
--data '{
  "insertMany": {
    "documents": [
      {
        "_id": "2",
        "purchase_type": "Online",
        "$vector": [0.1, 0.15, 0.3, 0.12, 0.05],
        "customer": {
          "name": "Jack B.",
          "phone": "123-456-2222",
        "age": 34,
        "credit_score": 700,
          "address": {
            "address_line": "888 Broadway",
            "city": "New York",
            "state": "NY"
          }
        },
        "purchase_date": {"$date": 1690391491},
        "seller": {
          "name": "Tammy S.",
          "location": "Staten Island NYC"
        },
        "items": [
            {
          "car" : "Tesla Model 3",
          "color": "White"
            },
            "Extended warranty - 10 years",
            "Service - 5 years"
        ],
        "amount": 53990,
      "status" : "active"
      },
      {
        "_id": "3",
        "purchase_type": "Online",
        "$vector": [0.15, 0.1, 0.1, 0.35, 0.55],
        "customer": {
          "name": "Jill D.",
          "phone": "123-456-3333",
        "age": 30,
        "credit_score": 742,
          "address": {
            "address_line": "12345 Broadway",
            "city": "New York",
            "state": "NY"
          }
        },
        "purchase_date": {"$date": 1690564291},
        "seller": {
          "name": "Jasmine S.",
          "location": "Brooklyn NYC"
        },
        "items": "Extended warranty - 10 years",
        "amount": 4600,
      "status" : "active"
      },
      {
        "_id": "4",
        "purchase_type": "In Person",
        "$vector": [0.25, 0.25, 0.25, 0.25, 0.26],
        "customer": {
          "name": "Lester M.",
          "phone": "123-456-4444",
        "age": 40,
        "credit_score": 802,
          "address": {
            "address_line": "12346 Broadway",
            "city": "New York",
            "state": "NY"
          }
        },
        "purchase_date": {"$date": 1690909891},
        "seller": {
          "name": "Jon B.",
          "location": "Manhattan NYC"
        },
        "items": [
            {
          "car" : "BMW 330i Sedan",
          "color": "Red"
            },
            "Extended warranty - 5 years",
            "Service - 5 years"
        ],
        "amount": 48510,
      "status" : "active"
      },
      {
        "_id": "5",
        "purchase_type": "Online",
        "$vector": [0.25, 0.045, 0.38, 0.31, 0.67],
        "customer": {
          "name": "David C.",
          "phone": "123-456-5555",
        "age": 50,
        "credit_score": 800,
          "address": {
            "address_line": "32345 Main Ave",
            "city": "Jersey City",
            "state": "NJ"
          }
        },
        "purchase_date": {"$date": 1690996291},
        "seller": {
          "name": "Jim A.",
          "location": "Jersey City NJ"
        },
        "items": [
          {
          "car" : "Tesla Model S",
          "color": "Red"
            },
            "Extended warranty - 5 years"
        ],
        "amount": 94990,
      "status" : "active"
      },
      {
        "_id": "6",
        "purchase_type": "In Person",
        "$vector": [0.11, 0.02, 0.78, 0.10, 0.27],
        "customer": {
          "name": "Chris E.",
          "phone": "123-456-6666",
        "age": 43,
        "credit_score": 764,
          "address": {
            "address_line": "32346 Broadway",
            "city": "New York",
            "state": "NY"
          }
        },
        "purchase_date": {"$date": 1691860291},
        "seller": {
          "name": "Jim A.",
          "location": "Jersey City NJ"
        },
        "items": [
          {
          "car" : "Tesla Model X",
          "color": "Blue"
            }
        ],
        "amount": 109990,
      "status" : "active"
      },
      {
        "_id": "7",
        "purchase_type": "Online",
        "$vector": [0.21, 0.22, 0.33, 0.44, 0.53],
        "customer": {
          "name": "Jeff G.",
          "phone": "123-456-7777",
        "age": 66,
        "credit_score": 802,
          "address": {
            "address_line": "22999 Broadway",
            "city": "New York",
            "state": "NY"
          }
        },
        "purchase_date": {"$date": 1692119491},
        "seller": {
          "name": "Jasmine S.",
          "location": "Brooklyn NYC"
        },
        "items": [{
          "car" : "BMW M440i Gran Coupe",
          "color": "Black"
            },
            "Extended warranty - 5 years"],
        "amount": 61050,
      "status" : "active"
      },
      {
        "_id": "8",
        "purchase_type": "In Person",
        "$vector": [0.3, 0.23, 0.15, 0.17, 0.4],
        "customer": {
          "name": "Harold S.",
          "phone": "123-456-8888",
        "age": 29,
        "credit_score": 710,
          "address": {
            "address_line": "1234 Main St",
            "city": "Orange",
            "state": "NJ"
          }
        },
        "purchase_date": {"$date": 1693329091},
        "seller": {
          "name": "Tammy S.",
          "location": "Staten Island NYC"
        },
        "items": [{
          "car" : "BMW X3 SUV",
          "color": "Black"
            },
            "Extended warranty - 5 years"
        ],
        "amount": 46900,
      "status" : "active"
      },
      {
        "_id": "9",
        "purchase_type": "Online",
        "$vector": [0.1, 0.15, 0.3, 0.12, 0.06],
        "customer": {
          "name": "Richard Z.",
          "phone": "123-456-9999",
        "age": 22,
        "credit_score": 690,
          "address": {
            "address_line": "22345 Broadway",
            "city": "New York",
            "state": "NY"
          }
        },
        "purchase_date": {"$date": 1693588291},
        "seller": {
          "name": "Jasmine S.",
          "location": "Brooklyn NYC"
        },
        "items": [{
          "car" : "Tesla Model 3",
          "color": "White"
            },
            "Extended warranty - 5 years"
        ],
        "amount": 53990,
      "status" : "active"
      },
      {
        "_id": "10",
        "purchase_type": "In Person",
        "$vector": [0.25, 0.045, 0.38, 0.31, 0.68],
        "customer": {
          "name": "Eric B.",
          "phone": null,
        "age": 54,
        "credit_score": 780,
          "address": {
            "address_line": "9999 River Rd",
            "city": "Fair Haven",
            "state": "NJ"
          }
        },
        "purchase_date": {"$date": 1694797891},
        "seller": {
          "name": "Jim A.",
          "location": "Jersey City NJ"
        },
        "items": [{
          "car" : "Tesla Model S",
          "color": "Black"
            }
        ],
        "amount": 93800,
      "status" : "active"
      },
      {
        "_id": "11",
        "purchase_type": "Online",
        "$vector": [0.44, 0.11, 0.33, 0.22, 0.88],
        "customer": {
          "name": "Ann J.",
          "phone": "123-456-1112",
        "age": 47,
        "credit_score": 660,
          "address": {
            "address_line": "99 Elm St",
            "city": "Fair Lawn",
            "state": "NJ"
          }
        },
        "purchase_date": {"$date": 1695921091},
        "seller": {
          "name": "Jim A.",
          "location": "Jersey City NJ"
        },
        "items": [{
          "car" : "Tesla Model Y",
          "color": "White"
            },
            "Extended warranty - 5 years"
        ],
        "amount": 57500,
      "status" : "active"
      },
      {
        "_id": "12",
        "purchase_type": "In Person",
        "$vector": [0.33, 0.44, 0.55, 0.77, 0.66],
        "customer": {
          "name": "John T.",
          "phone": "123-456-1123",
        "age": 55,
        "credit_score": 786,
          "address": {
            "address_line": "23 Main Blvd",
            "city": "Staten Island",
            "state": "NY"
          }
        },
        "purchase_date": {"$date": 1696180291},
        "seller": {
          "name": "Tammy S.",
          "location": "Staten Island NYC"
        },
        "items": [{
          "car" : "BMW 540i xDrive Sedan",
          "color": "Black"
            },
            "Extended warranty - 5 years"
        ],
        "amount": 64900,
      "status" : "active"
      },
      {
        "_id": "13",
        "purchase_type": "Online",
        "$vector": [0.1, 0.15, 0.3, 0.12, 0.07],
        "customer": {
          "name": "Aaron W.",
          "phone": "123-456-1133",
        "age": 60,
        "credit_score": 702,
          "address": {
            "address_line": "1234 4th Ave",
            "city": "New York",
            "state": "NY"
          }
        },
        "purchase_date": {"$date": 1697389891},
        "seller": {
          "name": "Jon B.",
          "location": "Manhattan NYC"
        },
        "items": [{
          "car" : "Tesla Model 3",
          "color": "White"
            },
            "Extended warranty - 5 years"
        ],
        "amount": 55000,
      "status" : "active"
      },
      {
        "_id": "14",
        "purchase_type": "In Person",
        "$vector": [0.11, 0.02, 0.78, 0.21, 0.27],
        "customer": {
          "name": "Kris S.",
          "phone": "123-456-1144",
        "age": 44,
        "credit_score": 702,
          "address": {
            "address_line": "1414 14th Pl",
            "city": "Brooklyn",
            "state": "NY"
          }
        },
        "purchase_date": {"$date": 1698513091},
        "seller": {
          "name": "Jasmine S.",
          "location": "Brooklyn NYC"
        },
        "items": [{
          "car" : "Tesla Model X",
          "color": "White"
            }
        ],
        "amount": 110400,
      "status" : "active"
      },
      {
        "_id": "15",
        "purchase_type": "Online",
        "$vector": [0.1, 0.15, 0.3, 0.12, 0.08],
        "customer": {
          "name": "Maddy O.",
          "phone": "123-456-1155",
        "age": 41,
        "credit_score": 782,
          "address": {
            "address_line": "1234 Maple Ave",
            "city": "West New York",
            "state": "NJ"
          }
        },
        "purchase_date": {"$date": 1701191491},
        "seller": {
          "name": "Jim A.",
          "location": "Jersey City NJ"
        },
        "items": {
          "car" : "Tesla Model 3",
          "color": "White"
            },
        "amount": 52990,
      "status" : "active"
      },
      {
        "_id": "16",
        "purchase_type": "In Person",
        "$vector": [0.44, 0.11, 0.33, 0.22, 0.88],
        "customer": {
          "name": "Tim C.",
          "phone": "123-456-1166",
        "age": 38,
        "credit_score": 700,
          "address": {
            "address_line": "1234 Main St",
            "city": "Staten Island",
            "state": "NY"
          }
        },
        "purchase_date": {"$date": 1701450691},
        "seller": {
          "name": "Tammy S.",
          "location": "Staten Island NYC"
        },
        "items": [{
          "car" : "Tesla Model Y",
          "color": "White"
            },
            "Extended warranty - 5 years"
        ],
        "amount": 58990,
      "status" : "active"
      },
      {
        "_id": "17",
        "purchase_type": "Online",
        "$vector": [0.1, 0.15, 0.3, 0.12, 0.09],
        "customer": {
          "name": "Yolanda Z.",
          "phone": "123-456-1177",
        "age": 61,
        "credit_score": 694,
          "address": {
            "address_line": "1234 Main St",
            "city": "Hoboken",
            "state": "NJ"
          }
        },
        "purchase_date": {"$date": 1702660291},
        "seller": {
          "name": "Jim A.",
          "location": "Jersey City NJ"
        },
        "items": [{
          "car" : "Tesla Model 3",
          "color": "Blue"
            },
            "Extended warranty - 5 years"
        ],
        "amount": 54900,
      "status" : "active"
      },
      {
        "_id": "18",
        "purchase_type": "Online",
        "$vector": [0.15, 0.17, 0.15, 0.43, 0.55],
        "customer": {
          "name": "Thomas D.",
          "phone": "123-456-1188",
        "age": 45,
        "credit_score": 724,
          "address": {
            "address_line": "98980 20th St",
            "city": "New York",
            "state": "NY"
          }
        },
        "purchase_date": {"$date": 1703092291},
        "seller": {
          "name": "Jon B.",
          "location": "Manhattan NYC"
        },
        "items": [{
          "car" : "BMW 750e xDrive Sedan",
          "color": "Black"
            },
            "Extended warranty - 5 years"
        ],
        "amount": 106900,
      "status" : "active"
      },
      {
        "_id": "19",
        "purchase_type": "Online",
        "$vector": [0.25, 0.25, 0.25, 0.25, 0.27],
        "customer": {
          "name": "Vivian W.",
          "phone": "123-456-1199",
        "age": 20,
        "credit_score": 698,
          "address": {
            "address_line": "5678 Elm St",
            "city": "Hartford",
            "state": "CT"
          }
        },
        "purchase_date": {"$date": 1704215491},
        "seller": {
          "name": "Jasmine S.",
          "location": "Brooklyn NYC"
        },
        "items": [{
          "car" : "BMW 330i Sedan",
          "color": "White"
            },
            "Extended warranty - 5 years"
        ],
        "amount": 46980,
      "status" : "active"
      },
      {
        "_id": "20",
        "purchase_type": "In Person",
        "$vector": [0.44, 0.11, 0.33, 0.22, 0.88],
        "customer": {
          "name": "Leslie E.",
          "phone": null,
        "age": 44,
        "credit_score": 782,
          "address": {
            "address_line": "1234 Main St",
            "city": "Newark",
            "state": "NJ"
          }
        },
        "purchase_date": {"$date": 1705338691},
        "seller": {
          "name": "Jim A.",
          "location": "Jersey City NJ"
        },
        "items": [{
          "car" : "Tesla Model Y",
          "color": "Black"
            },
            "Extended warranty - 5 years"
        ],
        "amount": 59800,
      "status" : "active"
      },
      {
        "_id": "21",
        "purchase_type": "In Person",
        "$vector": [0.21, 0.22, 0.33, 0.44, 0.53],
        "customer": {
          "name": "Rachel I.",
          "phone": null,
        "age": 62,
        "credit_score": 786,
          "address": {
            "address_line": "1234 Park Ave",
            "city": "New York",
            "state": "NY"
          }
        },
        "purchase_date": {"$date": 1706202691},
        "seller": {
          "name": "Jon B.",
          "location": "Manhattan NYC"
        },
        "items": [{
          "car" : "BMW M440i Gran Coupe",
          "color": "Silver"
            },
            "Extended warranty - 5 years",
            "Gap Insurance - 5 years"
        ],
        "amount": 65250,
      "status" : "active"
      }
    ],
    "options": {
        "ordered": false
    }
  }
}' | json_pp</code></pre>
</div>
</div>
<details>
<summary class="title">Response</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
   "status" : {
      "insertedIds" : [
         "4",
         "7",
         "10",
         "13",
         "16",
         "19",
         "21",
         "18",
         "6",
         "12",
         "15",
         "9",
         "3",
         "11",
         "2",
         "17",
         "14",
         "8",
         "20",
         "5"
      ]
   }
}</code></pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>Properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">insertMany</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data API designation that many documents (up to 20 at a time) are being inserted.</p>
<p class="tableblock"><a href="api-reference:partial$insert-command-payload.adoc" class="bare">api-reference:partial$insert-command-payload.adoc</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_find_a_document"><a class="anchor" href="#_find_a_document"></a>Find a document</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Retrieve a single document from a collection using various options.</p>
</div>
<div id="_tabs_5" class="openblock tabs is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_5_python" class="tab">
<p>Python</p>
</li>
<li id="_tabs_5_typescript" class="tab">
<p>TypeScript</p>
</li>
<li id="_tabs_5_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_5_curl" class="tab">
<p>cURL</p>
</li>
</ul>
</div>
<div id="_tabs_5_python--panel" class="tabpanel" aria-labelledby="_tabs_5_python">
<div class="paragraph">
<p>Retrieve a single document from a collection by its <code>_id</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">document = collection.find_one({"_id": 101})</code></pre>
</div>
</div>
<div class="paragraph">
<p>Retrieve a single document from a collection by any attribute, as long as it is covered by the collection&#8217;s indexing configuration.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>As noted in <a href="api-reference:collections.html#the-indexing-option">The Indexing option</a> in the Collections reference topic, any field that is part of a subsequent filter or sort operation must be an indexed field. If you elected to not index certain or all fields when you created the collection, you cannot reference that field in a filter/sort query.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">document = collection.find_one({"location": "warehouse_C"})</code></pre>
</div>
</div>
<div class="paragraph">
<p>Retrieve a single document from a collection by an arbitrary filtering clause.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">document = collection.find_one({"tag": {"$exists": True}})</code></pre>
</div>
</div>
<div class="paragraph">
<p>Retrieve the most similar document to a given vector.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">result = collection.find_one({}, vector=[.12, .52, .32])</code></pre>
</div>
</div>
<div class="paragraph">
<p>Retrieve only specific fields from a document.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">result = collection.find_one({"_id": 101}, projection={"name": True})</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns:</p>
</div>
<div class="paragraph">
<p><code>Union[Dict[str, Any], None]</code> - Either the found document as a dictionary or None if no matching document is found.</p>
</div>
<details>
<summary class="title">Example response</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>{'_id': 101, 'name': 'John Doe', '$vector': [0.12, 0.52, 0.32]}</pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>Parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Dict[str, Any]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A predicate expressed as a dictionary according to the Data API filter syntax. Examples are <code>{}</code>, <code>{"name": "John"}</code>, <code>{"price": {"$le": 100}}</code>, <code>{"$and": [{"name": "John"}, {"price": {"$le": 100}}]}</code>. See <a href="api-reference:overview.html#operators">Data API operators</a> for the full list of operators.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">projection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Union[Iterable[str], Dict[str, bool]]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to select a subset of fields in the documents being returned. The projection can be: an iterable over the field names to return; a dictionary {field_name: True} to positively select certain fields; or a dictionary {field_name: False} if one wants to discard some fields from the response. The default is to return the whole documents.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Iterable[float]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A suitable vector, meaning a list of float numbers of the appropriate dimensionality, to perform vector search. That is, Approximate Nearest Neighbors (ANN) search, extracting the most similar document in the collection matching the filter. This parameter cannot be used together with <code>sort</code>. See the <code>find</code> method for more details on this parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">include_similarity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[bool]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A boolean to request the numeric value of the similarity to be returned as an added "$similarity" key in the returned document. Can only be used for vector ANN search, i.e. when either <code>vector</code> is supplied or the <code>sort</code> parameter has the shape {"$vector": &#8230;&#8203;}.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Dict[str, Any]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">With this dictionary parameter one can control the order the documents are returned. See the Note about sorting for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max_time_ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[int]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A timeout, in milliseconds, for the underlying HTTP request.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">from astrapy import DataAPIClient
import astrapy
client = DataAPIClient("<strong>TOKEN</strong>")
database = my_client.get_database_by_api_endpoint("01234567-...")
collection = database.my_collection

collection.find_one({})
# prints: {'_id': '68d1e515-...', 'seq': 37}
collection.find_one({"seq": 10})
# prints: {'_id': 'd560e217-...', 'seq': 10}
collection.find_one({"seq": 1011})
# (returns None for no matches)
collection.find_one({}, projection={"seq": False})
# prints: {'_id': '68d1e515-...'}
collection.find_one(
    {},
    sort={"seq": astrapy.constants.SortDocuments.DESCENDING},
)
# prints: {'_id': '97e85f81-...', 'seq': 69}
collection.find_one({}, vector=[1, 0])
# prints: {'_id': '...', 'tag': 'D', '$vector': [4.0, 1.0]}</code></pre>
</div>
</div>
</div>
<div id="_tabs_5_typescript--panel" class="tabpanel" aria-labelledby="_tabs_5_typescript">
<div class="paragraph">
<p>TBD</p>
</div>
</div>
<div id="_tabs_5_java--panel" class="tabpanel" aria-labelledby="_tabs_5_java">
<div class="paragraph">
<p>TBD</p>
</div>
</div>
<div id="_tabs_5_curl--panel" class="tabpanel" aria-labelledby="_tabs_5_curl">
<div class="paragraph">
<p>This Data API <code>findOne</code> command retrieves a document based on a filter using a specific <code>_id</code> value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">curl -s --location \
--request POST ${ASTRA_DB_API_ENDPOINT}/api/json/v1/${ASTRA_DB_KEYSPACE}/${ASTRA_DB_COLLECTION} \
--header "Token: ${ASTRA_DB_APPLICATION_TOKEN}" \
--header "Content-Type: application/json" \
--header "Accept: application/json" \
--data '{
  "findOne": {
    "filter": {"_id" : "14"}
  }
}' | json_pp</code></pre>
</div>
</div>
<div class="paragraph">
<p>Result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
   "data" : {
      "document" : {
         "$vector" : [
            0.11,
            0.02,
            0.78,
            0.21,
            0.27
         ],
         "_id" : "14",
         "amount" : 110400,
         "customer" : {
            "address" : {
               "address_line" : "1414 14th Pl",
               "city" : "Brooklyn",
               "state" : "NY"
            },
            "age" : 44,
            "credit_score" : 702,
            "name" : "Kris S.",
            "phone" : "123-456-1144"
         },
         "items" : [
            {
               "car" : "Tesla Model X",
               "color" : "White"
            }
         ],
         "purchase_date" : {
            "$date" : 1698513091
         },
         "purchase_type" : "In Person",
         "seller" : {
            "location" : "Brooklyn NYC",
            "name" : "Jasmine S."
         },
         "status" : "active"
      }
   }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_find_documents_using_filtering_options"><a class="anchor" href="#_find_documents_using_filtering_options"></a>Find documents using filtering options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Iterate over documents in a collection matching a given filter.</p>
</div>
<div id="_tabs_6" class="openblock tabs is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_6_python" class="tab">
<p>Python</p>
</li>
<li id="_tabs_6_typescript" class="tab">
<p>TypeScript</p>
</li>
<li id="_tabs_6_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_6_curl" class="tab">
<p>cURL</p>
</li>
</ul>
</div>
<div id="_tabs_6_python--panel" class="tabpanel" aria-labelledby="_tabs_6_python">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">doc_iterator = collection.find({"category": "house_appliance"}, limit=10)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Iterate over the documents most similar to a given query vector.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">doc_iterator = collection.find({}, vector=[0.55, -0.40, 0.08], limit=5)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns:</p>
</div>
<div class="paragraph">
<p><code>Cursor</code> - A cursor for iterating over documents. An AstraPy cursor can
be used in a for loop, and provides a few additional features.</p>
</div>
<details>
<summary class="title">Example response</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>Cursor("vector_collection", new, retrieved: 0)</pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>Parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Dict[str, Any]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A predicate expressed as a dictionary according to the Data API filter syntax. Examples are <code>{}</code>, <code>{"name": "John"}</code>, <code>{"price": {"$le": 100}}</code>, <code>{"$and": [{"name": "John"}, {"price": {"$le": 100}}]}</code>. See <a href="api-reference:data-api.html#data-api-operators">Data API operators</a> for the full list of operators.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">projection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Union[Iterable[str], Dict[str, bool]]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to select a subset of fields in the documents being returned. The projection can be: an iterable over the field names to return; a dictionary {field_name: True} to positively select certain fields; or a dictionary {field_name: False} if one wants to discard some fields from the response. The default is to return the whole documents.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">skip</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[int]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">With this integer parameter, what would be the first <code>skip</code> documents returned by the query are discarded, and the results start from the (skip+1)-th document. This parameter can be used only in conjunction with an explicit <code>sort</code> criterion of the ascending/descending type (i.e. it cannot be used when not sorting, nor with vector-based ANN search).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">limit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[int]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This (integer) parameter sets a limit over how many documents are returned. Once <code>limit</code> is reached (or the cursor is exhausted for lack of matching documents), nothing more is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Iterable[float]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A suitable vector, meaning a list of float numbers of the appropriate dimensionality, to perform vector search; that is, Approximate Nearest Neighbors (ANN) search. When running similarity search on a collection, no other sorting criteria can be specified. Moreover, there is an upper bound to the number of documents that can be returned. For details, see the Data API <a href="api-reference:overview.html#limits">Limits</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">include_similarity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[bool]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A boolean to request the numeric value of the similarity to be returned as an added "$similarity" key in each returned document. Can only be used for vector ANN search, i.e. when either <code>vector</code> is supplied or the <code>sort</code> parameter has the shape {"$vector": &#8230;&#8203;}.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Dict[str, Any]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">With this dictionary parameter one can control the order the documents are returned. See the Note about sorting, as well as the one about upper bounds, for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max_time_ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[int]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A timeout, in milliseconds, for each single one of the underlying HTTP requests used to fetch documents as the cursor is iterated over.</p></td>
</tr>
</tbody>
</table>
</div>
<div id="_tabs_6_typescript--panel" class="tabpanel" aria-labelledby="_tabs_6_typescript">
<div class="paragraph">
<p>TBD</p>
</div>
</div>
<div id="_tabs_6_java--panel" class="tabpanel" aria-labelledby="_tabs_6_java">
<div class="paragraph">
<p>TBD</p>
</div>
</div>
<div id="_tabs_6_curl--panel" class="tabpanel" aria-labelledby="_tabs_6_curl">
<div class="paragraph">
<p>TBD</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example_values_for_sort_operations"><a class="anchor" href="#_example_values_for_sort_operations"></a>Example values for sort operations</h2>
<div class="sectionbody">
<div id="_tabs_7" class="openblock tabs is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_7_python" class="tab">
<p>Python</p>
</li>
<li id="_tabs_7_typescript" class="tab">
<p>TypeScript</p>
</li>
<li id="_tabs_7_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_7_curl" class="tab">
<p>cURL</p>
</li>
</ul>
</div>
<div id="_tabs_7_python--panel" class="tabpanel" aria-labelledby="_tabs_7_python">
<div class="paragraph">
<p>When no particular order is required:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">sort={}  # (default when parameter not provided)</code></pre>
</div>
</div>
<div class="paragraph">
<p>When sorting by a certain value in ascending/descending order:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">from astrapy.constants import SortDocuments
sort={"field": SortDocuments.ASCENDING}
sort={"field": SortDocuments.DESCENDING}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When sorting first by "field" and then by "subfield"
(while modern Python versions preserve the order of dictionaries,
it is suggested for clarity to employ a <code>collections.OrderedDict</code>
in these cases):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">sort={
    "field": SortDocuments.ASCENDING,
    "subfield": SortDocuments.ASCENDING,
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When running a vector similarity (ANN) search:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">sort={"$vector": [0.4, 0.15, -0.5]}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Some combinations of arguments impose an implicit upper bound on the
number of documents that are returned by the Data API. More specifically:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Vector ANN searches cannot return more than a certain number of documents; currently, 1000 per search operation.</p>
</li>
<li>
<p>When using a sort criterion of the ascending/descending type,
the Data API returns a smaller number of documents, currently set to 20, and stops there. The returned documents are
the top results across the whole collection according to the requested criterion.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Keep in mind these provisions even when subsequently running a command such as <code>.distinct()</code> on a cursor.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When not specifying sorting criteria at all (by vector or otherwise),
the cursor can scroll through an arbitrary number of documents as
the Data API and the client periodically exchange new chunks of documents.</p>
</div>
<div class="paragraph">
<p>The behavior of the cursor&#8201;&#8212;&#8201;in the case that documents have been added/removed after the <code>find</code> was started&#8201;&#8212;&#8201;depends on database
internals. It it is not guaranteed, nor excluded, that such "real-time" changes in the data would be picked up by the cursor.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">from astrapy import DataAPIClient
import astrapy
client = DataAPIClient("<strong>TOKEN</strong>")
database = my_client.get_database_by_api_endpoint("01234567-...")
collection = database.my_collection

filter = {"seq": {"$exists": True}}
for doc in collection.find(filter, projection={"seq": True}, limit=5):
    print(doc["seq"])
...
# will print e.g.:
#   37
#   35
#   10
#   36
#   27
cursor1 = collection.find(
    {},
    limit=4,
    sort={"seq": astrapy.constants.SortDocuments.DESCENDING},
)
[doc["_id"] for doc in cursor1]
# prints: ['97e85f81-...', '1581efe4-...', '...', '...']
cursor2 = collection.find({}, limit=3)
cursor2.distinct("seq")
# prints: [37, 35, 10]
collection.insert_many([
    {"tag": "A", "$vector": [4, 5]},
    {"tag": "B", "$vector": [3, 4]},
    {"tag": "C", "$vector": [3, 2]},
    {"tag": "D", "$vector": [4, 1]},
    {"tag": "E", "$vector": [2, 5]},
])
ann_tags = [
    document["tag"]
    for document in collection.find(
        {},
        limit=3,
        vector=[3, 3],
    )
]
ann_tags
# prints: ['A', 'B', 'C']
# (assuming the collection has metric VectorMetric.COSINE)</code></pre>
</div>
</div>
</div>
<div id="_tabs_7_typescript--panel" class="tabpanel" aria-labelledby="_tabs_7_typescript">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">Hello TypeScript world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_7_java--panel" class="tabpanel" aria-labelledby="_tabs_7_java">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello Java world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_7_curl--panel" class="tabpanel" aria-labelledby="_tabs_7_curl">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello cURL world. TBD.</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_find_and_update_a_document"><a class="anchor" href="#_find_and_update_a_document"></a>Find and update a document</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Locate a document matching a filter condition and apply changes to it, returning the document itself.</p>
</div>
<div id="_tabs_8" class="openblock tabs is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_8_python" class="tab">
<p>Python</p>
</li>
<li id="_tabs_8_typescript" class="tab">
<p>TypeScript</p>
</li>
<li id="_tabs_8_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_8_curl" class="tab">
<p>cURL</p>
</li>
</ul>
</div>
<div id="_tabs_8_python--panel" class="tabpanel" aria-labelledby="_tabs_8_python">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">collection.find_one_and_update(
    {"Marco": {"$exists": True}},
    {"$set": {"title": "Mr."}},
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Locate and update a document, returning the document itself, creating a new one if nothing is found.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">collection.find_one_and_update(
    {"Marco": {"$exists": True}},
    {"$set": {"title": "Mr."}},
    upsert=True,
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns:</p>
</div>
<div class="paragraph">
<p><code>Dict[str, Any]</code> - The document that was found, either before or after the update
(or a projection thereof, as requested). If no matches are found, <code>None</code> is returned.</p>
</div>
<details>
<summary class="title">Example response</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>{'_id': 999, 'Marco': 'Polo'}</pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>Parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dict[str, Any]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A predicate expressed as a dictionary according to the Data API filter syntax. Examples are <code>{}</code>, <code>{"name": "John"}</code>, <code>{"price": {"$le": 100}}</code>, <code>{"$and": [{"name": "John"}, {"price": {"$le": 100}}]}</code>. See <a href="api-reference:data-api.html#data-api-operators">Data API operators</a> for the full list of operators.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">update</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dict[str, Any]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The update prescription to apply to the document, expressed as a dictionary as per Data API syntax. Examples are: <code>{"$set": {"field": "value}}</code>, <code>{"$inc": {"counter": 10}}</code> and <code>{"$unset": {"field": ""}}</code>. See <a href="api-reference:data-api.html#data-api-operators">Data API operators</a> for the full syntax.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">projection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[ProjectionType]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to select a subset of fields in the document being returned. The projection can be: an iterable over the field names to return; a dictionary {field_name: True} to positively select certain fields; or a dictionary {field_name: False} if one wants to discard some fields from the response. The default is to return the whole documents.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Iterable[float]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A suitable vector, meaning a list of float numbers of the appropriate dimensionality, to use vector search. That is, Approximate Nearest Neighbors (ANN) search, as the sorting criterion. In this way, the matched document (if any) will be the one that is most similar to the provided vector. This parameter cannot be used together with <code>sort</code>. See the <code>find</code> method for more details on this parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Dict[str, Any]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">With this dictionary parameter one can control the sorting order of the documents matching the filter, effectively determining what document will come first and hence be the updated one. See the <code>find</code> method for more on sorting.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">upsert</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool = False</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This parameter controls the behavior in absence of matches. If True, a new document (resulting from applying the <code>update</code> to an empty document) is inserted if no matches are found on the collection. If False, the operation silently does nothing in case of no matches.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">return_document</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A flag controlling what document is returned: if set to <code>ReturnDocument.BEFORE</code>, or the string "before", the document found on database is returned; if set to <code>ReturnDocument.AFTER</code>, or the string "after", the new document is returned. The default is "before".</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max_time_ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[int]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A timeout, in milliseconds, for the underlying HTTP request.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">from astrapy import DataAPIClient
import astrapy
client = DataAPIClient("<strong>TOKEN</strong>")
database = my_client.get_database_by_api_endpoint("01234567-...")
collection = database.my_collection

collection.insert_one({"Marco": "Polo"})

collection.find_one_and_update(
    {"Marco": {"$exists": True}},
    {"$set": {"title": "Mr."}},
)
# prints: {'_id': 'a80106f2-...', 'Marco': 'Polo'}
collection.find_one_and_update(
    {"title": "Mr."},
    {"$inc": {"rank": 3}},
    projection=["title", "rank"],
    return_document=astrapy.constants.ReturnDocument.AFTER,
)
# prints: {'_id': 'a80106f2-...', 'title': 'Mr.', 'rank': 3}
collection.find_one_and_update(
    {"name": "Johnny"},
    {"$set": {"rank": 0}},
    return_document=astrapy.constants.ReturnDocument.AFTER,
)
# (returns None for no matches)
collection.find_one_and_update(
    {"name": "Johnny"},
    {"$set": {"rank": 0}},
    upsert=True,
    return_document=astrapy.constants.ReturnDocument.AFTER,
)
# prints: {'_id': 'cb4ef2ab-...', 'name': 'Johnny', 'rank': 0}</code></pre>
</div>
</div>
</div>
<div id="_tabs_8_typescript--panel" class="tabpanel" aria-labelledby="_tabs_8_typescript">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">Hello TypeScript world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_8_java--panel" class="tabpanel" aria-labelledby="_tabs_8_java">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello Java world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_8_curl--panel" class="tabpanel" aria-labelledby="_tabs_8_curl">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello DevOps cURL world. TBD.</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_update_a_document"><a class="anchor" href="#_update_a_document"></a>Update a document</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Update a single document on the collection as requested.</p>
</div>
<div id="_tabs_9" class="openblock tabs is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_9_python" class="tab">
<p>Python</p>
</li>
<li id="_tabs_9_typescript" class="tab">
<p>TypeScript</p>
</li>
<li id="_tabs_9_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_9_curl" class="tab">
<p>cURL</p>
</li>
</ul>
</div>
<div id="_tabs_9_python--panel" class="tabpanel" aria-labelledby="_tabs_9_python">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">update_result = collection.update_one(
    {"_id": 456},
    {"$set": {"name": "John Smith"}},
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Update a single document on the collection, inserting a new one if no match is found.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">update_result = collection.update_one(
    {"_id": 456},
    {"$set": {"name": "John Smith"}},
    upsert=True,
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns:</p>
</div>
<div class="paragraph">
<p><code>UpdateResult</code> - An object representing the response from the database after the update operation. It includes information about the operation.</p>
</div>
<details>
<summary class="title">Example response</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>UpdateResult(raw_results=[{'data': {'document': {'_id': '1', 'name': 'John Doe'}}, 'status': {'matchedCount': 1, 'modifiedCount': 1}}], update_info={'n': 1, 'updatedExisting': True, 'ok': 1.0, 'nModified': 1})</pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>Parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dict[str, Any]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A predicate expressed as a dictionary according to the Data API filter syntax. Examples are <code>{}</code>, <code>{"name": "John"}</code>, <code>{"price": {"$le": 100}}</code>, <code>{"$and": [{"name": "John"}, {"price": {"$le": 100}}]}</code>. See <a href="api-reference:data-api.html#data-api-operators">Data API operators</a> for the full list of operators.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">update</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dict[str, Any]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The update prescription to apply to the document, expressed as a dictionary as per Data API syntax. Examples are: <code>{"$set": {"field": "value}}</code>, <code>{"$inc": {"counter": 10}}</code> and <code>{"$unset": {"field": ""}}</code>. See <a href="api-reference:data-api.html#data-api-operators">Data API operators</a> for the full syntax.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dict[str, Any]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A suitable vector, meaning a list of float numbers of the appropriate dimensionality, to use vector search. That is, Approximate Nearest Neighbors (ANN) search, as the sorting criterion. In this way, the matched document (if any) will be the one that is most similar to the provided vector. This parameter cannot be used together with <code>sort</code>. See the <code>find</code> method for more details on this parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Dict[str, Any]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">With this dictionary parameter one can control the sorting order of the documents matching the filter, effectively determining what document will come first and hence be the updated one. See the <code>find</code> method for more on sorting.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">upsert</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool = False</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This parameter controls the behavior in absence of matches. If True, a new document (resulting from applying the <code>update</code> to an empty document) is inserted if no matches are found on the collection. If False, the operation silently does nothing in case of no matches.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max_time_ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[int]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A timeout, in milliseconds, for the underlying HTTP request.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">from astrapy import DataAPIClient
client = DataAPIClient("<strong>TOKEN</strong>")
database = my_client.get_database_by_api_endpoint("01234567-...")
collection = database.my_collection

collection.insert_one({"Marco": "Polo"})

collection.update_one({"Marco": {"$exists": True}}, {"$inc": {"rank": 3}})
# prints: UpdateResult(raw_results=..., update_info={'n': 1, 'updatedExisting': True, 'ok': 1.0, 'nModified': 1})
collection.update_one({"Mirko": {"$exists": True}}, {"$inc": {"rank": 3}})
# prints: UpdateResult(raw_results=..., update_info={'n': 0, 'updatedExisting': False, 'ok': 1.0, 'nModified': 0})
collection.update_one(
    {"Mirko": {"$exists": True}},
    {"$inc": {"rank": 3}},
    upsert=True,
)
# prints: UpdateResult(raw_results=..., update_info={'n': 1, 'updatedExisting': False, 'ok': 1.0, 'nModified': 0, 'upserted': '2a45ff60-...'})</code></pre>
</div>
</div>
</div>
<div id="_tabs_9_typescript--panel" class="tabpanel" aria-labelledby="_tabs_9_typescript">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">Hello TypeScript world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_9_java--panel" class="tabpanel" aria-labelledby="_tabs_9_java">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello Java world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_9_curl--panel" class="tabpanel" aria-labelledby="_tabs_9_curl">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello cURL world. TBD.</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_update_multiple_documents"><a class="anchor" href="#_update_multiple_documents"></a>Update multiple documents</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Update multiple documents in a collection.</p>
</div>
<div id="_tabs_10" class="openblock tabs is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_10_python" class="tab">
<p>Python</p>
</li>
<li id="_tabs_10_typescript" class="tab">
<p>TypeScript</p>
</li>
<li id="_tabs_10_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_10_curl" class="tab">
<p>cURL</p>
</li>
</ul>
</div>
<div id="_tabs_10_python--panel" class="tabpanel" aria-labelledby="_tabs_10_python">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">results = collection.update_many(
    {"name": {"$exists": False}},
    {"$set": {"name": "unknown"}},
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Update multiple documents in a collection, inserting a new one if no matches are found.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">results = collection.update_many(
    {"name": {"$exists": False}},
    {"$set": {"name": "unknown"}},
    upsert=True,
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns:</p>
</div>
<div class="paragraph">
<p><code>UpdateResult</code> - An object representing the response from the database after the update operation. It includes information about the operation.</p>
</div>
<details>
<summary class="title">Example response</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>UpdateResult(raw_results=[{'status': {'matchedCount': 2, 'modifiedCount': 2}}], update_info={'n': 2, 'updatedExisting': True, 'ok': 1.0, 'nModified': 2})</pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>Parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dict[str, Any]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A predicate expressed as a dictionary according to the Data API filter syntax. Examples are <code>{}</code>, <code>{"name": "John"}</code>, <code>{"price": {"$le": 100}}</code>, <code>{"$and": [{"name": "John"}, {"price": {"$le": 100}}]}</code>. See <a href="api-reference:data-api.html#data-api-operators">Data API operators</a> for the full list of operators.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">update</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dict[str, Any]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The update prescription to apply to the document, expressed as a dictionary as per Data API syntax. Examples are: <code>{"$set": {"field": "value}}</code>, <code>{"$inc": {"counter": 10}}</code> and <code>{"$unset": {"field": ""}}</code>. See <a href="api-reference:data-api.html#data-api-operators">Data API operators</a> for the full syntax.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">upsert</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This parameter controls the behavior in absence of matches. If True, a single new document (resulting from applying <code>update</code> to an empty document) is inserted if no matches are found on the collection. If False, the operation silently does nothing in case of no matches.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max_time_ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[int]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A timeout, in milliseconds, for the operation.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">from astrapy import DataAPIClient
client = DataAPIClient("<strong>TOKEN</strong>")
database = my_client.get_database_by_api_endpoint("01234567-...")
collection = database.my_collection

collection.insert_many([{"c": "red"}, {"c": "green"}, {"c": "blue"}])

collection.update_many({"c": {"$ne": "green"}}, {"$set": {"nongreen": True}})
# prints: UpdateResult(raw_results=..., update_info={'n': 2, 'updatedExisting': True, 'ok': 1.0, 'nModified': 2})
collection.update_many({"c": "orange"}, {"$set": {"is_also_fruit": True}})
# prints: UpdateResult(raw_results=..., update_info={'n': 0, 'updatedExisting': False, 'ok': 1.0, 'nModified': 0})
collection.update_many(
    {"c": "orange"},
    {"$set": {"is_also_fruit": True}},
    upsert=True,
)
# prints: UpdateResult(raw_results=..., update_info={'n': 1, 'updatedExisting': False, 'ok': 1.0, 'nModified': 0, 'upserted': '46643050-...'})</code></pre>
</div>
</div>
</div>
<div id="_tabs_10_typescript--panel" class="tabpanel" aria-labelledby="_tabs_10_typescript">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">Hello TypeScript world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_10_java--panel" class="tabpanel" aria-labelledby="_tabs_10_java">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello Java world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_10_curl--panel" class="tabpanel" aria-labelledby="_tabs_10_curl">
<div class="paragraph">
<p>Use the Data API updateMany command to update multiple documents in a collection.</p>
</div>
<div class="paragraph">
<p>In this example, the JSON payload uses the <code>$set</code> update operator to change a status to "inactive" for those documents that have an "active" status.</p>
</div>
<div class="paragraph">
<p>The <code>updateMany</code> command includes pagination support in the event more documents that matched the filter are on a subsequent page. For more, see the <a href="#pagination-note">pagination note</a> after the cURL example.</p>
</div>
<div class="paragraph">
<p><a href="api-reference:partial$json-structure-http-post.adoc" class="bare">api-reference:partial$json-structure-http-post.adoc</a></p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">curl -s --location \
--request POST ${ASTRA_DB_API_ENDPOINT}/api/json/v1/${ASTRA_DB_KEYSPACE}/${ASTRA_DB_COLLECTION} \
--header "Token: ${ASTRA_DB_APPLICATION_TOKEN}" \
--header "Content-Type: application/json" \
--header "Accept: application/json" \
--data '{
  "updateMany": {
    "filter": {"status" : "active" },
    "update" : {"$set" : { "status" : "inactive"}}
  }
}' | json_pp</code></pre>
</div>
</div>
<div class="paragraph">
<p>Result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
   "status" : {
      "matchedCount" : 20,
      "modifiedCount" : 20,
      "moreData" : true
   }
}</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">updateMany</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Updates multiple documents in the database&#8217;s collection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the criteria for selecting documents to which the command applies. The filter looks for documents where:
* <code>status</code>: The key being evaluated in each document; a property within the documents in the database.
* <code>active</code>: The value that the <code>status</code> property must match for the document to be selected. In this case, it&#8217;s targeting documents that currently have a status of <code>active.</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">update</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the modifications to be applied to all documents that match the criteria set by the filter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$set</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">operator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An update operator indicating that the operation should overwrite the value of a property (or properties) in the selected documents.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the property in the document to update. In this example, active or inactive will be set for all selected documents. In this context, it&#8217;s changing the <code>status</code> from <code>active</code> to <code>inactive.</code></p></td>
</tr>
</tbody>
</table>
<div id="pagination-note" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In the <code>updateMany</code> response, check whether a <code>nextPageState</code> ID was returned. The <code>updateMany</code> command includes pagination support. You can update one page of matching documents at a time. If there is a subsequent page with matching documents to update, the transaction returns a <code>nextPageState</code> ID. You would then submit the <code>insertMany</code> command again and include the <code>pageState</code> ID in the new request to update the next page of documents that matched the filter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "updateMany": {
        "filter": {
            "active_user": true
        },
        "update": {
            "$set": {
                "new_data": "new_data_value"
            }
        },
        "options": {
            "pageState": "&lt;id-value-from-prior-response&gt;"
        }
    }
}</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Follow the sequence of one or more <code>insertMany</code> commands until all pages with documents matching the filter have the update applied.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_find_distinct_values_across_documents"><a class="anchor" href="#_find_distinct_values_across_documents"></a>Find distinct values across documents</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Get a list of the distinct values of a certain key in a collection.</p>
</div>
<div id="_tabs_11" class="openblock tabs is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_11_python" class="tab">
<p>Python</p>
</li>
<li id="_tabs_11_typescript" class="tab">
<p>TypeScript</p>
</li>
<li id="_tabs_11_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_11_curl" class="tab">
<p>cURL</p>
</li>
</ul>
</div>
<div id="_tabs_11_python--panel" class="tabpanel" aria-labelledby="_tabs_11_python">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">collection.distinct("category")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Get the distinct values in a subset of documents, with a key defined by a dot-syntax path.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">collection.distinct(
    "food.allergies",
    filter={"registered_for_dinner": True},
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns:</p>
</div>
<div class="paragraph">
<p><code>List[Any]</code> - A list of the distinct values encountered. Documents that lack the requested key are ignored.</p>
</div>
<details>
<summary class="title">Example response</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>['home_appliance', None, 'sports_equipment', {'cat_id': 54, 'cat_name': 'gardening_gear'}]</pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>Parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the field whose value is inspected across documents. Keys can use dot-notation to descend to deeper document levels. Example of acceptable <code>key</code> values: <code>"field"</code>, <code>"field.subfield"</code>, <code>"field.3"</code>, and <code>"field.3.subfield"</code>. If lists are encountered and no numeric index is specified, all items in the list are visited.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Dict[str, Any]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A predicate expressed as a dictionary according to the Data API filter syntax. Examples are <code>{}</code>, <code>{"name": "John"}</code>, <code>{"price": {"$le": 100}}</code>, <code>{"$and": [{"name": "John"}, {"price": {"$le": 100}}]}</code>. See <a href="api-reference:data-api.html#data-api-operators">Data API operators</a> for the full list of operators.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max_time_ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A timeout, in milliseconds, for the operation.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Keep in mind that <code>distinct</code> is a client-side operation, which effectively browses all required documents using the logic
of the <code>find</code> method and collects the unique values found for <code>key</code>. As such, there may be performance, latency and ultimately
billing implications if the amount of matching documents is large.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For details on the behavior of "distinct" in conjunction with real-time changes in the collection contents, see the discussion in the <a href="api-reference:documents.html#distinct-note">Sort examples values</a> section.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">from astrapy import DataAPIClient
client = DataAPIClient("<strong>TOKEN</strong>")
database = my_client.get_database_by_api_endpoint("01234567-...")
collection = database.my_collection

collection.insert_many(
    [
        {"name": "Marco", "food": ["apple", "orange"], "city": "Helsinki"},
        {"name": "Emma", "food": {"likes_fruit": True, "allergies": []}},
    ]
)

collection.distinct("name")
# prints: ['Marco', 'Emma']
collection.distinct("city")
# prints: ['Helsinki']
collection.distinct("food")
# prints: ['apple', 'orange', {'likes_fruit': True, 'allergies': []}]
collection.distinct("food.1")
# prints: ['orange']
collection.distinct("food.allergies")
# prints: []
collection.distinct("food.likes_fruit")
# prints: [True]</code></pre>
</div>
</div>
</div>
<div id="_tabs_11_typescript--panel" class="tabpanel" aria-labelledby="_tabs_11_typescript">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">Hello TypeScript world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_11_java--panel" class="tabpanel" aria-labelledby="_tabs_11_java">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello Java world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_11_curl--panel" class="tabpanel" aria-labelledby="_tabs_11_curl">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello cURL world. TBD.</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_count_documents_in_a_collection"><a class="anchor" href="#_count_documents_in_a_collection"></a>Count documents in a collection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Get the count of all documents in a collection.</p>
</div>
<div id="_tabs_12" class="openblock tabs is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_12_python" class="tab">
<p>Python</p>
</li>
<li id="_tabs_12_typescript" class="tab">
<p>TypeScript</p>
</li>
<li id="_tabs_12_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_12_curl" class="tab">
<p>cURL</p>
</li>
</ul>
</div>
<div id="_tabs_12_python--panel" class="tabpanel" aria-labelledby="_tabs_12_python">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">collection.count_documents({}, upper_bound=500)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Get the count of the documents in a collection matching a condition.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">collection.count_documents({"seq":{"$gt": 15}}, upper_bound=50)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns:</p>
</div>
<div class="paragraph">
<p><code>int</code> - The exact count of the documents counted as requested, unless it exceeds the caller-provided or API-set upper bound. In case of overflow, an exception is raised.</p>
</div>
<details>
<summary class="title">Example response</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>320</pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>Parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Dict[str, Any]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A predicate expressed as a dictionary according to the Data API filter syntax. Examples are <code>{}</code>, <code>{"name": "John"}</code>, <code>{"price": {"$le": 100}}</code>, <code>{"$and": [{"name": "John"}, {"price": {"$le": 100}}]}</code>. See <a href="api-reference:data-api.html#data-api-operators">Data API operators</a> for the full list of operators.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">upper_bound</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A required ceiling on the result of the count operation. If the actual number of documents exceeds this value, an exception will be raised. Furthermore, if the actual number of documents exceeds the maximum count that the Data API can reach (regardless of upper_bound), an exception will be raised.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max_time_ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[int]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A timeout, in milliseconds, for the underlying HTTP request.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">from astrapy import DataAPIClient
client = DataAPIClient("<strong>TOKEN</strong>")
database = my_client.get_database_by_api_endpoint("01234567-...")
collection = database.my_collection

collection.insert_many([{"seq": i} for i in range(20)])

collection.count_documents({}, upper_bound=100)
# prints: 20
collection.count_documents({"seq":{"$gt": 15}}, upper_bound=100)
# prints: 4
collection.count_documents({}, upper_bound=10)
# Raises: astrapy.exceptions.TooManyDocumentsToCountException</code></pre>
</div>
</div>
</div>
<div id="_tabs_12_typescript--panel" class="tabpanel" aria-labelledby="_tabs_12_typescript">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">Hello TypeScript world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_12_java--panel" class="tabpanel" aria-labelledby="_tabs_12_java">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello Java world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_12_curl--panel" class="tabpanel" aria-labelledby="_tabs_12_curl">
<div class="paragraph">
<p>Use the Data API <code>estimatedDocumentCount</code> command to return the approximate number of documents in the collection.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In the <code>estimatedDocumentCount</code> command&#8217;s response, the document count is based on the current system statistics at the time the request was received by the database server. Due to potentially in-progress updates (document additions and/or deletions), the actual number of documents in the collection may be lower or higher in the database.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">curl -s --location \
--request POST ${ASTRA_DB_API_ENDPOINT}/api/json/v1/${ASTRA_DB_KEYSPACE}/${ASTRA_DB_COLLECTION} \
--header "Token: ${ASTRA_DB_APPLICATION_TOKEN}" \
--header "Content-Type: application/json" \
--header "Accept: application/json" \
--data '{
            "estimatedDocumentCount": {
            }
}' | json_pp</code></pre>
</div>
</div>
<div class="paragraph">
<p>Result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "status": {
        "count": 21
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 40%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">estimatedDocumentCount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">command</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns an estimated count of documents within the context of the specified collection.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The object is { } empty, meaning there are no filters or options for this implementation of the <code>estimatedDocumentCount</code> command.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_find_and_replace_a_document"><a class="anchor" href="#_find_and_replace_a_document"></a>Find and replace a document</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Locate a document matching a filter condition and replace it with a new document, returning the document itself.</p>
</div>
<div id="_tabs_13" class="openblock tabs is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_13_python" class="tab">
<p>Python</p>
</li>
<li id="_tabs_13_typescript" class="tab">
<p>TypeScript</p>
</li>
<li id="_tabs_13_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_13_curl" class="tab">
<p>cURL</p>
</li>
</ul>
</div>
<div id="_tabs_13_python--panel" class="tabpanel" aria-labelledby="_tabs_13_python">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">collection.find_one_and_replace(
    {"_id": "rule1"},
    {"text": "some animals are more equal!"},
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Locate and replace a document, returning the document itself, additionally creating it if nothing is found.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">collection.find_one_and_replace(
    {"_id": "rule1"},
    {"text": "some animals are more equal!"},
    upsert=True,
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns:</p>
</div>
<div class="paragraph">
<p><code>Dict[str, Any]</code> - The document that was found, either before or after the
replacement (or a projection thereof, as requested). If no matches are found,
<code>None</code> is returned.</p>
</div>
<details>
<summary class="title">Example response</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>{'_id': 'rule1', 'text': 'all animals are equal'}</pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>Parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dict[str, Any]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A predicate expressed as a dictionary according to the Data API filter syntax. Examples are <code>{}</code>, <code>{"name": "John"}</code>, <code>{"price": {"$le": 100}}</code>, <code>{"$and": [{"name": "John"}, {"price": {"$le": 100}}]}</code>. See <a href="api-reference:data-api.html#data-api-operators">Data API operators</a> for the full list of operators.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">replacement</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dict[str, Any]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the new document to write into the collection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">projection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[ProjectionType]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to select a subset of fields in the document being returned. The projection can be: an iterable over the field names to return; a dictionary {field_name: True} to positively select certain fields; or a dictionary {field_name: False} if one wants to discard some fields from the response. The default is to return the whole documents.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Iterable[float]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A suitable vector, meaning a list of float numbers of the appropriate dimensionality, to use vector search. That is, Approximate Nearest Neighbors (ANN) search, as the sorting criterion. In this way, the matched document (if any) will be the one that is most similar to the provided vector. This parameter cannot be used together with <code>sort</code>. See the <code>find</code> method for more details on this parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Dict[str, Any]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">With this dictionary parameter one can control the sorting order of the documents matching the filter, effectively determining what document will come first and hence be the replaced one. See the <code>find</code> method for more on sorting.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">upsert</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool = False</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This parameter controls the behavior in absence of matches. If True, <code>replacement</code> is inserted as a new document if no matches are found on the collection. If False, the operation silently does nothing in case of no matches.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">return_document</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A flag controlling what document is returned: if set to <code>ReturnDocument.BEFORE</code>, or the string "before", the document found on database is returned; if set to <code>ReturnDocument.AFTER</code>, or the string "after", the new document is returned. The default is "before".</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max_time_ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[int]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A timeout, in milliseconds, for the underlying HTTP request.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">from astrapy import DataAPIClient
client = DataAPIClient("<strong>TOKEN</strong>")
database = my_client.get_database_by_api_endpoint("01234567-...")
collection = database.my_collection
import astrapy

collection.insert_one({"_id": "rule1", "text": "all animals are equal"})

collection.find_one_and_replace(
    {"_id": "rule1"},
    {"text": "some animals are more equal!"},
)
# prints: {'_id': 'rule1', 'text': 'all animals are equal'}
collection.find_one_and_replace(
    {"text": "some animals are more equal!"},
    {"text": "and the pigs are the rulers"},
    return_document=astrapy.constants.ReturnDocument.AFTER,
)
# prints: {'_id': 'rule1', 'text': 'and the pigs are the rulers'}
collection.find_one_and_replace(
    {"_id": "rule2"},
    {"text": "F=ma^2"},
    return_document=astrapy.constants.ReturnDocument.AFTER,
)
# (returns None for no matches)
collection.find_one_and_replace(
    {"_id": "rule2"},
    {"text": "F=ma"},
    upsert=True,
    return_document=astrapy.constants.ReturnDocument.AFTER,
    projection={"_id": False},
)
# prints: {'text': 'F=ma'}</code></pre>
</div>
</div>
</div>
<div id="_tabs_13_typescript--panel" class="tabpanel" aria-labelledby="_tabs_13_typescript">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">Hello TypeScript world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_13_java--panel" class="tabpanel" aria-labelledby="_tabs_13_java">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello Java world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_13_curl--panel" class="tabpanel" aria-labelledby="_tabs_13_curl">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello cURL world. TBD.</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_replace_a_document"><a class="anchor" href="#_replace_a_document"></a>Replace a document</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Replace a document in the collection with a new one.</p>
</div>
<div id="_tabs_14" class="openblock tabs is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_14_python" class="tab">
<p>Python</p>
</li>
<li id="_tabs_14_typescript" class="tab">
<p>TypeScript</p>
</li>
<li id="_tabs_14_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_14_curl" class="tab">
<p>cURL</p>
</li>
</ul>
</div>
<div id="_tabs_14_python--panel" class="tabpanel" aria-labelledby="_tabs_14_python">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">replace_result = collection.replace_one(
    {"Marco": {"$exists": True}},
    {"Buda": "Pest"},
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace a document in the collection with a new one, creating a new one if no match is found.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">replace_result = collection.replace_one(
    {"Marco": {"$exists": True}},
    {"Buda": "Pest"},
    upsert=True,
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns:</p>
</div>
<div class="paragraph">
<p><code>UpdateResult</code> - An object representing the response from the database after the replace operation. It includes information about the operation.</p>
</div>
<details>
<summary class="title">Example response</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>UpdateResult(raw_results=[{'data': {'document': {'_id': '1', 'Marco': 'Polo'}}, 'status': {'matchedCount': 1, 'modifiedCount': 1}}], update_info={'n': 1, 'updatedExisting': True, 'ok': 1.0, 'nModified': 1})</pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>Parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dict[str, Any]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A predicate expressed as a dictionary according to the Data API filter syntax. Examples are <code>{}</code>, <code>{"name": "John"}</code>, <code>{"price": {"$le": 100}}</code>, <code>{"$and": [{"name": "John"}, {"price": {"$le": 100}}]}</code>. See <a href="api-reference:data-api.html#data-api-operators">Data API operators</a> for the full list of operators.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">replacement</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dict[str, Any]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the new document to write into the collection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Iterable[float]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A suitable vector, meaning a list of float numbers of the appropriate dimensionality, to use vector search. That is, Approximate Nearest Neighbors (ANN) search, as the sorting criterion. In this way, the matched document (if any) will be the one that is most similar to the provided vector. This parameter cannot be used together with <code>sort</code>. See the <code>find</code> method for more details on this parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Dict[str, Any]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">With this dictionary parameter one can control the sorting order of the documents matching the filter, effectively determining what document will come first and hence be the replaced one. See the <code>find</code> method for more on sorting.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">upsert</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool = False</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This parameter controls the behavior in absence of matches. If True, <code>replacement</code> is inserted as a new document if no matches are found on the collection. If False, the operation silently does nothing in case of no matches.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max_time_ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[int]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A timeout, in milliseconds, for the underlying HTTP request.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">from astrapy import DataAPIClient
client = DataAPIClient("<strong>TOKEN</strong>")
database = my_client.get_database_by_api_endpoint("01234567-...")
collection = database.my_collection

collection.insert_one({"Marco": "Polo"})
collection.replace_one({"Marco": {"$exists": True}}, {"Buda": "Pest"})
 prints: UpdateResult(raw_results=..., update_info={'n': 1, 'updatedExisting': True, 'ok': 1.0, 'nModified': 1})
collection.find_one({"Buda": "Pest"})
 prints: {'_id': '8424905a-...', 'Buda': 'Pest'}
collection.replace_one({"Mirco": {"$exists": True}}, {"Oh": "yeah?"})
 prints: UpdateResult(raw_results=..., update_info={'n': 0, 'updatedExisting': False, 'ok': 1.0, 'nModified': 0})
collection.replace_one({"Mirco": {"$exists": True}}, {"Oh": "yeah?"}, upsert=True)
 prints: UpdateResult(raw_results=..., update_info={'n': 1, 'updatedExisting': False, 'ok': 1.0, 'nModified': 0, 'upserted': '931b47d6-...'})</code></pre>
</div>
</div>
</div>
<div id="_tabs_14_typescript--panel" class="tabpanel" aria-labelledby="_tabs_14_typescript">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">Hello TypeScript world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_14_java--panel" class="tabpanel" aria-labelledby="_tabs_14_java">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello Java world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_14_curl--panel" class="tabpanel" aria-labelledby="_tabs_14_curl">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello cURL world. TBD.</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_find_and_delete_a_document"><a class="anchor" href="#_find_and_delete_a_document"></a>Find and delete a document</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Locate a document matching a filter condition and delete it, returning the document itself.</p>
</div>
<div id="_tabs_15" class="openblock tabs is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_15_python" class="tab">
<p>Python</p>
</li>
<li id="_tabs_15_typescript" class="tab">
<p>TypeScript</p>
</li>
<li id="_tabs_15_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_15_curl" class="tab">
<p>cURL</p>
</li>
</ul>
</div>
<div id="_tabs_15_python--panel" class="tabpanel" aria-labelledby="_tabs_15_python">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">collection.find_one_and_delete({"status": "stale_entry"})</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns:</p>
</div>
<div class="paragraph">
<p><code>Dict[str, Any]</code> - The document that was just deleted (or a projection thereof, as requested). If no matches are
found, <code>None</code> is returned.</p>
</div>
<details>
<summary class="title">Example response</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>{'_id': 199, 'status': 'stale_entry', 'request_id': 'A4431'}</pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>Parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Dict[str, Any]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A predicate expressed as a dictionary according to the Data API filter syntax. Examples are <code>{}</code>, <code>{"name": "John"}</code>, <code>{"price": {"$le": 100}}</code>, <code>{"$and": [{"name": "John"}, {"price": {"$le": 100}}]}</code>. See <a href="api-reference:data-api.html#data-api-operators">Data API operators</a> for the full list of operators.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">projection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Union[Iterable[str], Dict[str, bool]]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to select a subset of fields in the documents being returned. The projection can be: an iterable over the field names to return; a dictionary {field_name: True} to positively select certain fields; or a dictionary {field_name: False} if one wants to discard some fields from the response. The default is to return the whole documents.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Iterable[float]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A suitable vector, meaning a list of float numbers of the appropriate dimensionality, to perform vector search. That is, Approximate Nearest Neighbors (ANN) search, extracting the most similar document in the collection matching the filter. This parameter cannot be used together with <code>sort</code>. See the <code>find</code> method for more details on this parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Dict[str, Any]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">With this dictionary parameter one can control the sorting order of the documents matching the filter, effectively determining what document will come first and hence be the deleted one. See the <code>find</code> method for more on sorting.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max_time_ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[int]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A timeout, in milliseconds, for the underlying HTTP request.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">from astrapy import DataAPIClient
client = DataAPIClient("<strong>TOKEN</strong>")
database = my_client.get_database_by_api_endpoint("01234567-...")
collection = database.my_collection

collection.insert_many(
    [
        {"species": "swan", "class": "Aves"},
        {"species": "frog", "class": "Amphibia"},
    ],
)
collection.find_one_and_delete(
    {"species": {"$ne": "frog"}},
    projection=["species"],
)
# prints: {'_id': '5997fb48-...', 'species': 'swan'}
collection.find_one_and_delete({"species": {"$ne": "frog"}})
# (returns None for no matches)</code></pre>
</div>
</div>
</div>
<div id="_tabs_15_typescript--panel" class="tabpanel" aria-labelledby="_tabs_15_typescript">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">Hello TypeScript world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_15_java--panel" class="tabpanel" aria-labelledby="_tabs_15_java">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello Java world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_15_curl--panel" class="tabpanel" aria-labelledby="_tabs_15_curl">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello cURL world. TBD.</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_delete_a_document"><a class="anchor" href="#_delete_a_document"></a>Delete a document</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Locate and delete a single document from a collection.</p>
</div>
<div id="_tabs_16" class="openblock tabs is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_16_python" class="tab">
<p>Python</p>
</li>
<li id="_tabs_16_typescript" class="tab">
<p>TypeScript</p>
</li>
<li id="_tabs_16_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_16_curl" class="tab">
<p>cURL</p>
</li>
</ul>
</div>
<div id="_tabs_16_python--panel" class="tabpanel" aria-labelledby="_tabs_16_python">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">response = collection.delete_one({ "_id": "1" })</code></pre>
</div>
</div>
<div class="paragraph">
<p>Locate and delete a single document from a collection by any attribute
(as long as it is covered by the collection&#8217;s indexing configuration).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">document = collection.delete_one({"location": "warehouse_C"})</code></pre>
</div>
</div>
<div class="paragraph">
<p>Locate and delete a single document from a collection by an arbitrary filtering clause.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">document = collection.delete_one({"tag": {"$exists": True}})</code></pre>
</div>
</div>
<div class="paragraph">
<p>Delete the most similar document to a given vector.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">result = collection.delete_one({}, vector=[.12, .52, .32])</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns:</p>
</div>
<div class="paragraph">
<p><code>DeleteResult</code> - An object representing the response from the database after the delete operation. It includes information about the success of the operation.</p>
</div>
<details>
<summary class="title">Example response</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>DeleteResult(raw_results=[{'status': {'deletedCount': 1}}], deleted_count=1)</pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>Parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Dict[str, Any]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A predicate expressed as a dictionary according to the Data API filter syntax. Examples are <code>{}</code>, <code>{"name": "John"}</code>, <code>{"price": {"$le": 100}}</code>, <code>{"$and": [{"name": "John"}, {"price": {"$le": 100}}]}</code>. See <a href="api-reference:data-api.html#data-api-operators">Data API operators</a> for the full list of operators.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Iterable[float]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A suitable vector, meaning a list of float numbers of the appropriate dimensionality, to use vector search. That is, Approximate Nearest Neighbors (ANN) search, as the sorting criterion. In this way, the matched document (if any) will be the one that is most similar to the provided vector. This parameter cannot be used together with <code>sort</code>. See the <code>find</code> method for more details on this parameter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Dict[str, Any]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">With this dictionary parameter one can control the sorting order of the documents matching the filter, effectively determining what document will come first and hence be the deleted one. See the <code>find</code> method for more on sorting.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max_time_ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[int]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A timeout, in milliseconds, for the underlying HTTP request.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">from astrapy import DataAPIClient
import astrapy
client = DataAPIClient("<strong>TOKEN</strong>")
database = my_client.get_database_by_api_endpoint("01234567-...")
collection = database.my_collection

collection.insert_many([{"seq": 1}, {"seq": 0}, {"seq": 2}])

collection.delete_one({"seq": 1})
# prints: DeleteResult(raw_results=..., deleted_count=1)
collection.distinct("seq")
# prints: [0, 2]
collection.delete_one(
    {"seq": {"$exists": True}},
    sort={"seq": astrapy.constants.SortDocuments.DESCENDING},
)
# prints: DeleteResult(raw_results=..., deleted_count=1)
collection.distinct("seq")
# prints: [0]
collection.delete_one({"seq": 2})
# prints: DeleteResult(raw_results=..., deleted_count=0)</code></pre>
</div>
</div>
</div>
<div id="_tabs_16_typescript--panel" class="tabpanel" aria-labelledby="_tabs_16_typescript">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">Hello TypeScript world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_16_java--panel" class="tabpanel" aria-labelledby="_tabs_16_java">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello Java world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_16_curl--panel" class="tabpanel" aria-labelledby="_tabs_16_curl">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello cURL world. TBD.</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_delete_documents"><a class="anchor" href="#_delete_documents"></a>Delete documents</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Delete multiple documents from a collection.</p>
</div>
<div id="_tabs_17" class="openblock tabs is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_17_python" class="tab">
<p>Python</p>
</li>
<li id="_tabs_17_typescript" class="tab">
<p>TypeScript</p>
</li>
<li id="_tabs_17_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_17_curl" class="tab">
<p>cURL</p>
</li>
</ul>
</div>
<div id="_tabs_17_python--panel" class="tabpanel" aria-labelledby="_tabs_17_python">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">delete_result = collection.delete_many({"status": "processed"})</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns:</p>
</div>
<div class="paragraph">
<p><code>DeleteResult</code> - An object representing the response from the database after the delete operation. It includes information about the success of the operation.</p>
</div>
<details>
<summary class="title">Example response</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>DeleteResult(raw_results=[{'status': {'deletedCount': 2}}], deleted_count=2)</pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>Parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[Dict[str, Any]]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A predicate expressed as a dictionary according to the Data API filter syntax. Examples are <code>{}</code>, <code>{"name": "John"}</code>, <code>{"price": {"$le": 100}}</code>, <code>{"$and": [{"name": "John"}, {"price": {"$le": 100}}]}</code>. See <a href="api-reference:data-api.html#data-api-operators">Data API operators</a> for the full list of operators. The <code>delete_many</code> method does not accept an empty filter: see <code>delete_all</code> to completely erase all contents of a collection</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max_time_ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[int]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A timeout, in milliseconds, for the operation.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This method would not admit an empty filter clause: use the <code>delete_all</code>
method to delete all documents in the collection.
If you want to delete all documents, use <code>delete_all</code> instead.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">from astrapy import DataAPIClient
client = DataAPIClient("<strong>TOKEN</strong>")
database = my_client.get_database_by_api_endpoint("01234567-...")
collection = database.my_collection

collection.insert_many([{"seq": 1}, {"seq": 0}, {"seq": 2}])

collection.delete_many({"seq": {"$lte": 1}})
# prints: DeleteResult(raw_results=..., deleted_count=2)
collection.distinct("seq")
# prints: [2]
collection.delete_many({"seq": {"$lte": 1}})
# prints: DeleteResult(raw_results=..., deleted_count=0)</code></pre>
</div>
</div>
</div>
<div id="_tabs_17_typescript--panel" class="tabpanel" aria-labelledby="_tabs_17_typescript">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">Hello TypeScript world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_17_java--panel" class="tabpanel" aria-labelledby="_tabs_17_java">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello Java world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_17_curl--panel" class="tabpanel" aria-labelledby="_tabs_17_curl">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello cURL world. TBD.</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_execute_multiple_write_operations"><a class="anchor" href="#_execute_multiple_write_operations"></a>Execute multiple write operations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Execute a (reusable) list of write operations on a collection with a single command.</p>
</div>
<div id="_tabs_18" class="openblock tabs is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_18_python" class="tab">
<p>Python</p>
</li>
<li id="_tabs_18_typescript" class="tab">
<p>TypeScript</p>
</li>
<li id="_tabs_18_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_18_curl" class="tab">
<p>cURL</p>
</li>
</ul>
</div>
<div id="_tabs_18_python--panel" class="tabpanel" aria-labelledby="_tabs_18_python">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">bw_results = collection.bulk_write(
    [
        InsertMany([{"a": 1}, {"a": 2}]),
        ReplaceOne(
            {"z": 9},
            replacement={"z": 9, "replaced": True},
            upsert=True,
        ),
    ],
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns:</p>
</div>
<div class="paragraph">
<p><code>BulkWriteResult</code> - A single object summarizing the whole list of requested operations. The keys in the map attributes of the result (when present) are the integer indices of the corresponding operation in the <code>requests</code> iterable.</p>
</div>
<details>
<summary class="title">Example response</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>BulkWriteResult(bulk_api_results={0: ..., 1: ...}, deleted_count=0, inserted_count=3, matched_count=0, modified_count=0, upserted_count=1, upserted_ids={1: '2addd676-...'})</pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>Parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">requests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Iterable[BaseOperation]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An iterable over concrete subclasses of <code>BaseOperation</code>, such as <code>InsertMany</code> or <code>ReplaceOne</code>. Each such object represents an operation ready to be executed on a collection, and is instantiated by passing the same parameters as one would the corresponding collection method.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ordered</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to launch the <code>requests</code> one after the other or in arbitrary order, possibly in a concurrent fashion. For performance reasons, <code>ordered=False</code> should be preferred when compatible with the needs of the application flow.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">concurrency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[int]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of concurrent operations executing at a given time. It cannot be more than one for ordered bulk writes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max_time_ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[int]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A timeout, in milliseconds, for the whole bulk write. Remember that, if the method call times out, then there&#8217;s no guarantee about what portion of the bulk write has been received and successfully executed by the Data API.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">from astrapy import DataAPIClient
from astrapy.operations import (
    InsertOne,
    InsertMany,
    UpdateOne,
    UpdateMany,
    ReplaceOne,
    DeleteOne,
    DeleteMany,
)
client = DataAPIClient("<strong>TOKEN</strong>")
database = my_client.get_database_by_api_endpoint("01234567-...")
collection = database.my_collection

op1 = InsertMany([{"a": 1}, {"a": 2}])
op2 = ReplaceOne({"z": 9}, replacement={"z": 9, "replaced": True}, upsert=True)
collection.bulk_write([op1, op2])
# prints: BulkWriteResult(bulk_api_results={0: ..., 1: ...}, deleted_count=0, inserted_count=3, matched_count=0, modified_count=0, upserted_count=1, upserted_ids={1: '2addd676-...'})
collection.count_documents({}, upper_bound=100)
# prints: 3
collection.distinct("replaced")
# prints: [True]</code></pre>
</div>
</div>
</div>
<div id="_tabs_18_typescript--panel" class="tabpanel" aria-labelledby="_tabs_18_typescript">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">Hello TypeScript world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_18_java--panel" class="tabpanel" aria-labelledby="_tabs_18_java">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello Java world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_18_curl--panel" class="tabpanel" aria-labelledby="_tabs_18_curl">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello cURL world. TBD.</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_delete_all_documents_from_a_collection"><a class="anchor" href="#_delete_all_documents_from_a_collection"></a>Delete all documents from a collection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Delete all documents in a collection.</p>
</div>
<div id="_tabs_19" class="openblock tabs is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_19_python" class="tab">
<p>Python</p>
</li>
<li id="_tabs_19_typescript" class="tab">
<p>TypeScript</p>
</li>
<li id="_tabs_19_java" class="tab">
<p>Java</p>
</li>
<li id="_tabs_19_curl" class="tab">
<p>cURL</p>
</li>
</ul>
</div>
<div id="_tabs_19_python--panel" class="tabpanel" aria-labelledby="_tabs_19_python">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">result = collection.delete_all()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns:</p>
</div>
<div class="paragraph">
<p><code>Dict</code> - A dictionary in the form <code>{"ok": 1}</code> if the method succeeds.</p>
</div>
<details>
<summary class="title">Example response</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>{'ok': 1}</pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>Parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">max_time_ms</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Optional[int]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A timeout, in milliseconds, for the underlying HTTP request.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">from astrapy import DataAPIClient
client = DataAPIClient("<strong>TOKEN</strong>")
database = my_client.get_database_by_api_endpoint("01234567-...")
collection = database.my_collection

my_coll.distinct("seq")
# prints: [2, 1, 0]
my_coll.count_documents({}, upper_bound=100)
# prints: 4
my_coll.delete_all()
# prints: {'ok': 1}
my_coll.count_documents({}, upper_bound=100)
# prints: 0</code></pre>
</div>
</div>
</div>
<div id="_tabs_19_typescript--panel" class="tabpanel" aria-labelledby="_tabs_19_typescript">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">Hello TypeScript world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_19_java--panel" class="tabpanel" aria-labelledby="_tabs_19_java">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello Java world. TBD.</code></pre>
</div>
</div>
</div>
<div id="_tabs_19_curl--panel" class="tabpanel" aria-labelledby="_tabs_19_curl">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Hello cURL world. TBD.</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_next_steps"><a class="anchor" href="#_next_steps"></a>Next steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See the <a href="api-reference:administration.html">Administration reference</a> topic.</p>
</div>
</div>
</div>
  <div class="flex gap-10 mt-12">
  <div class="flex flex-col">
    <h3 class="!m-0">Was this helpful?</h3>
    <div id="feedback_buttons" class="flex gap-2 mt-4 transition-opacity opacity-100">
      <button
        id="feedback_button_yes"
        class="btn btn-neutral btn-outlined"
        data-track="Was This Helpful?: Yes Button Clicked"
      >
        <i class="mr-2 material-icons">thumb_up</i>Yes
      </button>
      <button
        id="feeback_button_no"
        class="btn btn-neutral btn-outlined"
        data-track="Was This Helpful?: No Button Clicked"
        onclick="feedback_dialog.showModal()"
      >
        <i class="mr-2 material-icons">thumb_down</i>No
      </button>
    </div>
    <div id="feedback_thank_you" class="hidden mt-4 transition-opacity opacity-0 marker:text-h2">Thank you for your
      feedback.
    </div>
  </div>
    <div class="ml-auto">
    <a
      href="http://example.com/project-xyz/blob/main/index.adoc"
      target="_blank"
      class="flex items-center after:hidden"
      data-track="Edit this page clicked"
    >
      <i
        class="mr-2 inline-block h-4 w-4 bg-[url('../img/social-github.svg')] bg-contain bg-no-repeat dark:invert"
      ></i>Edit this page
    </a>
  </div>
</div>
<dialog id="feedback_dialog" class="dialog w-[40rem]">
  <form method="dialog" id="feedback_form">
    <div class="flex items-center p-6 border-b">
      <h1 class="!m-0">Give Feedback</h1>
      <button id="feedback_form_esc_button" class="h-8 p-2 ml-auto btn btn-plain btn-neutral" formnovalidate><span
          class="px-2 rounded text-overline bg-level1 text-tertiary"
        >ESC</span><i class="material-icons text-link">close</i></button>
    </div>
    <div class="p-6">
      <p class="!mt-0">How can we improve the documentation?</p>
      <textarea
        rows="4"
        name="message"
        class="mt-2 input"
        placeholder="Provide your feedback"
        required
        autofocus
      ></textarea>
    </div>
    <div class="flex justify-end gap-2 px-6 pt-4 pb-6 border-t top">
      <button class="btn btn-neutral btn-outlined" id="feedback_form_cancel_button" formnovalidate>Cancel</button>
      <button class="btn btn-neutral btn-solid" type="submit">Submit Feedback</button>
    </div>
  </form>
</dialog>
  </article>
  </main>
  <aside
  class="toc sidebar peer sticky hidden h-[calc(100vh-10rem)] mb-[14rem] w-[20rem] xl:flex xl:flex-col xl:col-start-2 top-[9rem]"
  data-title="Contents"
  data-levels="2"
>
  <div class="toc-menu-container overflow-y-auto">
    <div class="toc-menu"></div>
  </div>
</aside>
   <footer class="footer [&_a]:text-link flex flex-col gap-6 border-t mt-auto pt-6 text-sm md:flex-row row-start-2 xl:peer-[.toc]:col-span-2">
  <div class="flex flex-col gap-6">
    <a
      href="https://www.datastax.com"
      target="_blank"
      title="Go to the DataStax Website"
      data-track="Footer datastax.com Link Clicked"
      class="w-min"
    >
    <svg
  width="172"
  height="16"
  viewBox="0 0 172 16"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M102.839 2.76735V0H89.5568L85.9498 2.76735V6.56742L89.5568 9.33477H101.133V13.2355H86.6671V16H100.308L103.916 13.2355V9.33477L100.308 6.56742H88.7324V2.76735H102.839Z"
    fill="var(--ds-text-primary)"
  />
  <path
    d="M33.3137 0H30.7798L21.486 16H24.6996L32.0526 3.34556L39.3968 16H42.6075L33.3137 0Z"
    fill="var(--ds-text-primary)"
  />
  <path
    d="M60.9406 0H42.9749V2.76735H50.5679V16H53.3476V2.76735H60.9406V0Z"
    fill="var(--ds-text-primary)"
  />
  <path
    d="M126.345 0H108.382V2.76735H115.972V16H118.754V2.76735H126.345V0Z"
    fill="var(--ds-text-primary)"
  />
  <path
    d="M14.3587 0H0V16H14.3587L17.9657 13.2327V2.76735L14.3587 0ZM2.78265 2.76735H15.1831V13.2355H2.78265V2.76735Z"
    fill="var(--ds-text-primary)"
  />
  <path
    d="M159.204 8L157.596 5.23265V5.23553L154.556 0H151.342L155.99 8L151.342 16H154.556L159.204 8Z"
    fill="var(--ds-text-primary)"
  />
  <path
    d="M163.774 8L165.383 5.23265V5.23553L168.426 0H171.636L166.991 8L171.636 16H168.426L163.774 8Z"
    fill="var(--ds-text-primary)"
  />
  <path
    d="M70.6018 0H73.1357L82.4295 16H79.2159L71.863 3.34556L64.5187 16H61.308L70.6018 0Z"
    fill="var(--ds-text-primary)"
  />
  <path
    d="M136.006 0H138.54L147.833 16H144.623L137.267 3.34556L129.926 16H126.712L136.006 0Z"
    fill="var(--ds-text-primary)"
  />
</svg>    </a>
    <p class="!m-0">
      <span>¬©</span>
      <span id="copyrightdate">2024</span>
      <span>DataStax |
        <a
          href="https://www.datastax.com/legal/datastax-website-privacy-policy"
          target="_blank"
          data-track="Footer Privacy Policy Link Clicked"
        >Privacy policy</a>
        |
        <a
          href="https://www.datastax.com/legal/datastax-website-terms-use"
          target="_blank"
          data-track="Footer Terms of Use Link Clicked"
        >Terms of use</a>
      </span>
    </p>
    <p class="text-tertiary !m-0 max-w-[640px] text-xs">Apache, Apache
      Cassandra, Cassandra, Apache Tomcat, Tomcat, Apache Lucene, Apache Solr,
      Apache Hadoop, Hadoop, Apache Pulsar, Pulsar, Apache Spark, Spark, Apache
      TinkerPop, TinkerPop, Apache Kafka and Kafka are either registered
      trademarks or trademarks of the Apache Software Foundation or its
      subsidiaries in Canada, the United States and/or other countries.
      Kubernetes is the registered trademark of the Linux Foundation.</p>
  </div>
  <div class="flex flex-col gap-6 md:ml-auto md:items-end">
    <div class="flex gap-4">
      <a
        href="https://www.facebook.com/datastax"
        target="_blank"
        data-track="Footer Facebook Link Clicked"
        title="Go to DataStax Facebook"
        class="h-5 w-5 bg-[url('../img/social-facebook.svg')] bg-no-repeat dark:invert"
      ></a>
      <a
        href="https://twitter.com/datastax"
        target="_blank"
        title="Go to DataStax X (Twitter)"
        data-track="Footer Twitter Link Clicked"
        class="h-5 w-5 bg-[url('../img/social-x.svg')] bg-no-repeat dark:invert"
      ></a>
      <a
        href="https://github.com/datastax/"
        target="_blank"
        title="Go to DataStax GitHub"
        data-track="Footer Github Link Clicked"
        class="h-5 w-5 bg-[url('../img/social-github.svg')] bg-no-repeat dark:invert"
      ></a>
      <a
        href="https://www.twitch.tv/datastaxdevs"
        target="_blank"
        title="Go to DataStax Twitch"
        data-track="Footer Twitch Link Clicked"
        class="h-5 w-5 bg-[url('../img/social-twitch.svg')] bg-no-repeat dark:invert"
      ></a>
      <a
        href="https://www.linkedin.com/company/datastax/"
        target="_blank"
        title="Go to DataStax Linkedin"
        data-track="Linkedin Link Clicked"
        class="h-5 w-5 bg-[url('../img/social-linkedin.svg')] bg-no-repeat dark:invert"
      ></a>
      <a
        href="https://datastax.medium.com/"
        target="_blank"
        title="Go to DataStax Medium"
        data-track="Footer Medium Link Clicked"
        class="h-5 w-5 bg-[url('../img/social-medium.svg')] bg-no-repeat dark:invert"
      ></a>
    </div>
    <p class="!m-0 md:text-right">General Inquiries:
      <a
        href="tel:+1-650-389-6000"
        data-track="Footer Telephone Link Clicked"
      >+1 (650) 389-6000</a>,
      <a
        href="mailto:info@datastax.com"
        data-track="Footer Email Link Clicked"
      >info@datastax.com</a>
    </p>
  </div>
</footer></div>
  </div>
  <div class="z-30 drawer-side pt-32">
    <label for="nav-drawer-input" aria-label="close sidebar" class="drawer-overlay"></label>
    <nav  id="side-nav" 
  class="h-full bg-level1 overflow-y-scroll flex flex-col w-[18.5rem] pt-4 px-2">
    <div class="dropdown mb-2">
  <button id="page-version-dropdown" title="Show other versions of page" class="group dropdown-trigger btn btn-soft btn-primary btn-small" aria-haspopup="true" aria-expanded="false">
    Version: <span class="font-bold ml-1">5.2</span>
    <i class="material-icons text-lg color-primary motion-safe:transition-transform motion-safe:duration-300 motion-safe:ease-in-out ml-[0.15em] group-[.active]:rotate-180">expand_more</i>
  </button>
  <ul class="dropdown-content py-2 bg-body border rounded w-32 z-40" role="menu" aria-orientation="vertical" aria-labelledby="page-version-dropdown">
    <li>
      <a 
        class="!no-underline w-full py-1 px-3 block hover:bg-level1 transition-colors"
        href="#">
          6.0
      </a>
    </li> 
    <li>
      <a 
        class="!no-underline w-full py-1 px-3 block hover:bg-level1 transition-colors font-bold color-primary"
        href="#">
          5.2
      </a>
    </li> 
    <li>
      <a 
        class="!no-underline w-full py-1 px-3 block hover:bg-level1 transition-colors"
        href="#">
          5.1
      </a>
    </li> 
    <li>
      <a 
        class="!no-underline w-full py-1 px-3 block hover:bg-level1 transition-colors"
        href="#">
          5.0
      </a>
    </li> 
  </ul>
</div>
    <a class="p-2 mb-1 text-h4 hover:bg-level2 rounded transition-colors !no-underline" href="#">Preview Docs</a>
    <ul class="nav-list">
  <li class="nav-item collapse" data-depth="0">
    <button 
      class="nav-item-toggle collapse-trigger w-full group" 
      aria-label="Page Templates" aria-expanded="false" aria-controls="1-page-templates">
    <span 
      class="nav-text flex items-center text-left gap-1 text-body-small text-primary rounded py-1 px-2 hover:bg-level2 transition-colors text-caption text-overline py-2">
        Page Templates
        <i class="material-icons text-lg text-tertiary mr-auto self-start motion-safe:transition-transform motion-safe:duration-300 motion-safe:ease-in-out group-[.active]:rotate-180 group-hover:text-primary">expand_more</i>
        
    </span>
    </button>
    <div id="1-page-templates" class="collapse-content ml-3 pl-2 border-l">
      <ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a 
      class="nav-link !no-underline" 
      href="../page-templates/full.html"
      
      >
    <span 
      class="nav-text flex items-center text-left gap-1 text-body-small text-primary rounded py-1 px-2 hover:bg-level2 transition-colors">
        Full
        
    </span>
    </a>
  </li>
  <li class="nav-item" data-depth="1">
    <a 
      class="nav-link !no-underline" 
      href="../page-templates/landing.html"
      
      >
    <span 
      class="nav-text flex items-center text-left gap-1 text-body-small text-primary rounded py-1 px-2 hover:bg-level2 transition-colors">
        Landing
        
    </span>
    </a>
  </li>
  <li class="nav-item" data-depth="1">
    <a 
      class="nav-link !no-underline" 
      href="../page-templates/tutorial.html"
      
      >
    <span 
      class="nav-text flex items-center text-left gap-1 text-body-small text-primary rounded py-1 px-2 hover:bg-level2 transition-colors">
        Tutorial
        
    </span>
    </a>
  </li>
  <li class="nav-item" data-depth="1">
    <a 
      class="nav-link !no-underline" 
      href="../page-templates/integrations-overview.html"
      
      >
    <span 
      class="nav-text flex items-center text-left gap-1 text-body-small text-primary rounded py-1 px-2 hover:bg-level2 transition-colors">
        Integrations Overview
        
    </span>
    </a>
  </li>
  <li class="nav-item" data-depth="1">
    <a 
      class="nav-link !no-underline" 
      href="../page-templates/integrations-detail.html"
      
      >
    <span 
      class="nav-text flex items-center text-left gap-1 text-body-small text-primary rounded py-1 px-2 hover:bg-level2 transition-colors">
        Integrations Detail
        
    </span>
    </a>
  </li>
</ul>
    </div>
  </li>
  <li class="nav-item collapse" data-depth="0">
    <button 
      class="nav-item-toggle collapse-trigger w-full group active" 
      aria-label="Asciidoc Examples" aria-expanded="false" aria-controls="1-asciidoc-examples">
    <span 
      class="nav-text flex items-center text-left gap-1 text-body-small text-primary rounded py-1 px-2 hover:bg-level2 transition-colors text-caption text-overline py-2">
        Asciidoc Examples
        <i class="material-icons text-lg text-tertiary mr-auto self-start motion-safe:transition-transform motion-safe:duration-300 motion-safe:ease-in-out group-[.active]:rotate-180 group-hover:text-primary">expand_more</i>
        
    </span>
    </button>
    <div id="1-asciidoc-examples" class="collapse-content ml-3 pl-2 border-l active">
      <ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a 
      class="nav-link !no-underline" 
      href="text-formatting.html"
      
      >
    <span 
      class="nav-text flex items-center text-left gap-1 text-body-small text-primary rounded py-1 px-2 hover:bg-level2 transition-colors">
        Text formatting
        
    </span>
    </a>
  </li>
  <li class="nav-item" data-depth="1">
    <a 
      class="nav-link !no-underline" 
      href="lists.html"
      
      >
    <span 
      class="nav-text flex items-center text-left gap-1 text-body-small text-primary rounded py-1 px-2 hover:bg-level2 transition-colors">
        Lists
        
    </span>
    </a>
  </li>
  <li class="nav-item" data-depth="1">
    <a 
      class="nav-link !no-underline" 
      href="tables.html"
      
      >
    <span 
      class="nav-text flex items-center text-left gap-1 text-body-small text-primary rounded py-1 px-2 hover:bg-level2 transition-colors">
        Tables
        
    </span>
    </a>
  </li>
  <li class="nav-item" data-depth="1">
    <a 
      class="nav-link !no-underline" 
      href="images.html"
      
      >
    <span 
      class="nav-text flex items-center text-left gap-1 text-body-small text-primary rounded py-1 px-2 hover:bg-level2 transition-colors">
        Images and media
        
    </span>
    </a>
  </li>
  <li class="nav-item" data-depth="1">
    <a 
      class="nav-link !no-underline" 
      href="code.html"
      
      >
    <span 
      class="nav-text flex items-center text-left gap-1 text-body-small text-primary rounded py-1 px-2 hover:bg-level2 transition-colors">
        Code
        
    </span>
    </a>
  </li>
  <li class="nav-item" data-depth="1">
    <a 
      class="nav-link !no-underline" 
      href="tabsets.html"
      
      >
    <span 
      class="nav-text flex items-center text-left gap-1 text-body-small text-primary rounded py-1 px-2 hover:bg-level2 transition-colors">
        Tabsets
        
    </span>
    </a>
  </li>
  <li class="nav-item" data-depth="1">
    <a 
      class="nav-link !no-underline" 
      href="blocks.html"
      
      >
    <span 
      class="nav-text flex items-center text-left gap-1 text-body-small text-primary rounded py-1 px-2 hover:bg-level2 transition-colors">
        Blocks
        
    </span>
    </a>
  </li>
  <li class="nav-item" data-depth="1">
    <a 
      class="nav-link !no-underline" 
      href="admonitions.html"
      
      >
    <span 
      class="nav-text flex items-center text-left gap-1 text-body-small text-primary rounded py-1 px-2 hover:bg-level2 transition-colors">
        Admonitions
        
    </span>
    </a>
  </li>
  <li class="nav-item" data-depth="1">
    <a 
      class="nav-link !no-underline" 
      href="test-standardized-client-reference.html"
      
      >
    <span 
      class="nav-text flex items-center text-left gap-1 text-body-small text-primary rounded py-1 px-2 hover:bg-level2 transition-colors">
        TEST Standardized client reference
        
    </span>
    </a>
  </li>
  <li class="nav-item" data-depth="1">
    <a 
      class="nav-link !no-underline" 
      href="test-unified-api-reference.html"
       aria-current="page"
      >
    <span 
      class="nav-text flex items-center text-left gap-1 text-body-small text-primary rounded py-1 px-2 hover:bg-level2 transition-colors color-primary font-semibold">
        TEST Unified API reference
        
    </span>
    </a>
  </li>
</ul>
    </div>
  </li>
</ul>
    <ul class="bg-level1 sticky bottom-0 mt-auto flex flex-col py-3">
  <li>
    <a
      class="text-body-small text-primary hover:bg-level2 flex rounded p-1 !no-underline transition-colors"
      href="https://www.datastax.com/"
      target="_self"
    >
      <span class="material-icons text-tertiary mr-2">home</span>
      DataStax Home
    </a>
  </li>
  <li>
    <a
      class="text-body-small text-primary hover:bg-level2 flex rounded p-1 !no-underline transition-colors"
      href="/glossary"
      target="_blank"
    >
      <span class="material-icons text-tertiary mr-2">menu_book</span>
      Glossary
    </a>
  </li>
  <li>
    <a
      class="text-body-small text-primary hover:bg-level2 flex rounded p-1 !no-underline transition-colors"
      href="https://support.datastax.com/"
      target="_blank"
    >
      <span class="material-icons text-tertiary mr-2">support</span>
      Support
    </a>
  </li>
  <li>
    <a
      class="text-body-small text-primary hover:bg-level2 flex rounded p-1 !no-underline transition-colors"
      href="https://downloads.datastax.com/"
      target="_blank"
    >
      <span class="material-icons text-tertiary mr-2">downloading</span>
      Downloads
    </a>
  </li>
</ul>
</nav>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/@floating-ui/core@1.6.0"></script>
<script src="https://cdn.jsdelivr.net/npm/@floating-ui/dom@1.6.3"></script>
<script id="site-script" src="../_/js/site.js" data-ui-root-path="../_"></script>
<script data-sync-storage-key="preferred-tab" async src="../_/js/vendor/tabs.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
<script async src="../_/js/vendor/zooming.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
  </body>
</html>
